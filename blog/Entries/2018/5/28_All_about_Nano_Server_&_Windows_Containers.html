<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.2" />
    <meta name="iWeb-Build" content="local-build-20200627" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>All about Nano Server &amp; Windows Containers</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="28_All_about_Nano_Server_%26_Windows_Containers_files/28_All_about_Nano_Server_%26_Windows_Containers.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='28_All_about_Nano_Server_%26_Windows_Containers_files/28_All_about_Nano_Server_%26_Windows_ContainersIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'blog.html';
iWebBlogMainPageTitle = 'blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebImage.js"></script>
    <script type="text/javascript" src="28_All_about_Nano_Server_%26_Windows_Containers_files/28_All_about_Nano_Server_%26_Windows_Containers.js"></script>
  </head>
  <body style="background: rgb(247, 246, 246); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(247, 246, 246); text-align: left; width: 700px; " id="body_content">
        <div style="float: left; height: 0px; line-height: 0px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 24px; opacity: 1.00; position: relative; width: 700px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .85em;\n\tcolor: #999;\n\tmargin: 0px;\n\tline-height: 20px;\n\tfont-weight: bold;\n}\n\n.navbar-bg {\n\ttext-align: left;\n\tpadding: 0px;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 15px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:hover\n{\n \tcolor: #F00;\n\ttext-decoration: none;\n}\n\n\nli.current-page a\n{\n\t color: #666;\n\ttext-decoration: none;\n\n}", "current-page-GUID": "3F9CBE75-F5BD-4B35-9E50-35A3B3B60A4E", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 416px; width: 620px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_620_41" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title"><span class="Color">All about Nano Server &amp; Windows Containers</span></p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Title"></div>
          </div>
          


          <div id="id2" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 448px; width: 620px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_620_41" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">Monday, May 28, 2018</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 40px; margin-top: 488px; position: relative; width: 620px; z-index: 1; " class="style_SkipStroke_3 shape-with-text flowDefining">
            <div class="text-content style_External_620_4458" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="Body">Today, I gave a presentation on two new features of Windows Server 2016 at a WWITPRO meetup:<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>Nano Server, a small footprint installation option of Windows Server 2016 server that primarily supports IIS, DNS &amp; File Services <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>Windows Containers, which is Windows Server 2016 support for docker containers<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">In this blog post, I’ll detail many of the commands that I used during this presentation, so that you can play with both Nano Server and Windows Containers at home.<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style_1">PART 1: NANO SERVER<br /></p>
                <p class="Body">If you have Hyper-V installed your host computer (Win10 or Windows Server 2016), you can easily host an Internal network by creating an Internal virtual switch in Hyper-V Manager.  I find that this setup is the easiest way to play with new systems - for my commands below, I’ll be using a setup that looks like this:<br /></p>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 290px; width: 519px;  height: 290px; position: relative; width: 519px; " class="tinyText style_SkipStroke_2 inline-block stroke_0 shadow_0"><img src="28_All_about_Nano_Server_%26_Windows_Containers_files/droppedImage.jpg" alt="" style="border: none; height: 290px; width: 519px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <p class="Body">The host OS is the computer on the left that is connected to the Internet via the External virtual switch, and to a private Internal network via the Internal virtual switch (192.168.1.0/24).   <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Although Nano Server can be installed natively on a computer (bare metal), we’ll be installing in a virtual machine.  Simply mount your 2016 DVD and copy the \NanoServer directory from the DVD to C:\.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Next, open PowerShell and run the following commands to create a Nano Server virtual machine called firstnano:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>cd C:\NanoServer\NanoServerImageGenerator <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Import-Module .\NanoServerImageGenerator.psm1 –verbose<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>New-NanoServerImage -DeploymentType guest -Edition standard -MediaPath C:\ -BasePath C:\NanoServer\NanoServerImageGenerator\ -TargetPath C:\ NanoServer\NanoServerImageGenerator\firstnano.vhdx -ComputerName firstnano -Package Microsoft-NanoServer-IIS-Package<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">You’ll be prompted to select an Administrator password and then the firstnano.vhdx image will be created.  The -Package option can be used to specify any package that exists within the Packages folder under the C:\NanoServer folder!<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Next, open Hyper-V Manager and create new virtual machine (1GB RAM, connected to the Internal virtual switch, existing firstnano.vhdx).  Next, boot your virtual machine and you will be prompted to authenticate to the Nano Server Recovery Console, where you can navigate the text menus to set IP information, firewall rules and enable WinRM.  At minimum, make sure you set the correct IP information and enable WinRM.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">On your host OS, run the following within PowerShell to connect to the Nano Server and open up the ports needed for file sharing (which is much easier with netsh than in the Nano Server Recovery Console):<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Set‐Item WSMan:\localhost\Client\TrustedHosts &quot;192.168.1.10&quot;<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Enter‐PSSession ‐ComputerName 192.168.1.10 ‐Credential 192.168.1.10\Administrator<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>netsh advfirewall firewall set rule group=&quot;File and Printer Sharing&quot; new enable=yes<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Now, you can test out fileserver access from your host OS.  Enter <span class="style_1">\\192.168.1.10\c$</span> within Windows Explorer to connect to the c$ share on your Nano Server.  Since you installed IIS when you created your firstnano.vhdx file, you can also test out access to the default IIS home page by entering <span class="style_1">http://192.168.1.10 </span>into your Web browser.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">If you want to join your Nano Server to a domain, you must perform an offline domain join using djoin.exe.  My host OS is also a domain controller for the domain called lala.com.  Thus, I can run the following command on my host OS to generate the offline join request:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>djoin.exe /provision /domain lala.com /machine firstnano /savefile C:\request<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Next, use PowerShell on your host OS to connect to Nano Server, and complete the offline domain join request:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Enter‐PSSession ‐ComputerName 192.168.1.10 ‐Credential 192.168.1.10\Administrator<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>djoin /requestodj /loadfile C:\request /windowspath C:\windows /localos<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Restart-Computer<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Once your computer has rebooted, you can now login locally to the Nano Server Recovery Console as the Administrator within the lala.com domain!<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Although we installed IIS during the creation of firstnano.vhdx, you can also add software later on too.  Check out <a title="https://docs.microsoft.com/en-us/windows-server/get-started/iis-on-nano-server&quot; \l &quot;installing-iis-on-nano-server" href="https://docs.microsoft.com/en-us/windows-server/get-started/iis-on-nano-server%22%20%5Cl%20%22installing-iis-on-nano-server">https://docs.microsoft.com/en-us/windows-server/get-started/iis-on-nano-server#installing-iis-on-nano-server</a> to see different methods of doing this!<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The easiest method to do this is using dism.exe alongside an unattend.xml file that specifies the packages to install from the C:\NanoServer\Packages folder.  Simply copy the C:\NanoServer\Packages folder from your host OS (which we copied earlier from the DVD) to the Nano Server (\\192.168.1.10\c$) so it shows up as C:\Packages on the Nano server.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Next, create a new C:\Unattend.xml file on your host OS with the following contents (to install IIS) and copy it to C:\ on your Nano Server:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>&lt;unattend xmlns=&quot;urn:schemas-microsoft-com:unattend&quot;&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>    &lt;servicing&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>        &lt;package action=&quot;install&quot;&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>            &lt;assemblyIdentity name=&quot;Microsoft-NanoServer-IIS-Package&quot; version=&quot;10.0.14393.0&quot; processorArchitecture=&quot;amd64&quot; publicKeyToken=&quot;31bf3856ad364e35&quot; language=&quot;neutral&quot; /&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>            &lt;source location=&quot;c:\packages\Microsoft-NanoServer-IIS-Package.cab&quot; /&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>        &lt;/package&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>        &lt;package action=&quot;install&quot;&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>            &lt;assemblyIdentity name=&quot;Microsoft-NanoServer-IIS-Package&quot; version=&quot;10.0.14393.0&quot; processorArchitecture=&quot;amd64&quot; publicKeyToken=&quot;31bf3856ad364e35&quot; language=&quot;en-US&quot; /&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>            &lt;source location=&quot;c:\packages\en-us\Microsoft-NanoServer-IIS-Package_en-us.cab&quot; /&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>        &lt;/package&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>    &lt;/servicing&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>    &lt;cpi:offlineImage cpi:source=&quot;&quot; xmlns:cpi=&quot;urn:schemas-microsoft-com:cpi&quot; /&gt;  <br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 20px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_4"><span style="font-size: 0px; position: relative; top: -8px; " class="Bullet"></span><span style="width: 20px; " class="inline-block"></span>&lt;/unattend&gt;<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Finally, open PowerShell on your host OS, connect to your Nano Server and install the software.  Since we chose to install IIS, you’ll need to start it afterwards as well using Start-Service or net start:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>dism /online /apply-unattend:\unattend.xml<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>dism /online /get-packages<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>net start w3svc<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">You can now test out access to the default IIS home page by entering <span class="style_1">http://192.168.1.10 </span>into your Web browser.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">As a final note, I should mention that Nano Server is simply a small footprint installation option for Windows Server 2016 - if you noticed earlier when we created firstnano.vhdx, I chose “Standard” as the edition.  That means I have to have a Standard edition license of Windows Server 2016 to legally run this virtual machine.  In other words, Nano Server is a complete server, and must be licensed like any other server - it’s just a small footprint server that may be better suited to running within the cloud, where a minimal attack surface is ideal. <br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style_1">PART 2: WINDOWS CONTAINERS<br /></p>
                <p class="Body">Containers are not new at all - they’ve been around for decades! The core concept is this:<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>You identify a key service &amp; related libraries (e.g. Web Server) that make a unique system<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Then you virtualize just those things on a common base OS (e.g. several copies of a “unique” Web Server running on a single OS kernel)  <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Each copy is called a container, and is NOT a full/standalone OS!  <br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">This type of virtualization is called OS virtualization since you have a single underlying OS that contains several different personas (=containers) and hence looks like several separate operating systems.  Docker is the most common OS virtualization software used today to create containers on almost any platform, and Windows Containers is just Windows support for Docker.  <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">If you haven’t made the connection yet, Nano was essentially created to support Docker (although Microsoft would probably never admit that).  Since Nano Server is a small footprint version of Windows Server 2016, you can easily run several Nano Server containers on a Windows Server 2016 host to provide a plethora of different Web, DNS and File services as needed.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Moreover, you can use <span class="style_2">regular containers</span> (same OS kernel underneath all containers) or <span class="style_2">Hyper-V containers</span> (different copy of kernel underneath each container).  The Hyper-V binaries provide the functionality to create a separate kernel underneath each container.  If you only plan on using regular containers, there’s no need to install Hyper-V whatsoever.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">But the best part about Windows Containers is the licensing.  Since a container is NOT a full/standalone OS, you can run them for FREE!<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>You can run an unlimited number of containers on Windows Server 2016 Datacenter edition<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>You can run an unlimited number of regular containers on Windows Server 2016 Standard edition, and up to 2 Hyper-V containers<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; position: relative; top: 0px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>You can run an unlimited number of Hyper-V containers on Win10 (Pro/Enterprise)<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Before installing Windows Containers and Docker, you must first ensure that you have all the updates on your Windows Server!  Next, you can add the NuGet Docker repository and install Docker using the following PowerShell commands:<br /></p>
                <ol>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Install‐Module ‐Name DockerMsftProvider ‐Repository psgallery –Force<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Install‐Package ‐Name docker ‐ProviderName DockerMsftProvider<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_3"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>Restart‐Computer ‐Force<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Next, create a free DockerHub account at <a title="https://hub.docker.com" href="https://hub.docker.com">https://hub.docker.com</a> <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Now, you can now use the <span class="style_2">docker command</span> from this point onwards to administer windows containers:<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker login</span>     #Log into DockerHub<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker search iis</span>     #Search for IIS images on DockerHub <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker pull nanoserver/iis</span>     #Downloads a preconfigured container<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker pull busybox</span>     #Why did this fail on a Windows host?<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker images</span>     #Shows downloaded container images<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker rmi –f imagenumber</span>     #Delete an image (don’t do this yet)<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker tag nanoserver/iis nanoweb</span>     #Creates an alias for an image<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker images</span>     #Note your alias shows up as a new image<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker ps</span>     #Are there any images running?<br /></p>
                  </li>
                  <li style="line-height: 19px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_2"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span>docker run --name nanoweb1 –it nanoweb<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">This last command runs a new container called nanoweb1 and opens a shell.  At this shell, run “dir c:\” and note you are on Nano server.  Next, run “ipconfig” and note your IPaddress (all containers sit behind a virtual NAT by default on the 172 network).<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">On your host OS, open your Web browser and enter http://IP_Address_of_container and note that you see the IIS Welcome page.  At the container shell, type exit to stop running your container, refresh the page in your Web browser and note that your container is no longer available!  Next, run the following:<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker ps</span>     #Are there any images running?<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker ps -a</span>     #What images have run in the past?<br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Take note of the container number (e.g. 75ab4e49c839).  You can now save your previous container settings for future use and start your container again.  Finally you can open a shell again in your container and stop it when finished:<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker commit containernumber</span> <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker start containernumber</span><br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker exec -it containernumber cmd </span> <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_5"><span style="font-family: 'CourierNewPSMT', 'Courier New', monospace; font-size: 14px; font-stretch: normal; font-style: normal; font-weight: 400; " class="Bullet">•</span><span style="width: 12px; " class="inline-block"></span><span class="style_1">docker stop containernumber</span><br /></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p style="padding-bottom: 0pt; " class="Body">At this point, you should have a basic understanding of containers - create several containers from your nanoweb image and ensure that they are all running concurrently.  Next, play around with changing the network settings that docker uses by default (hint: check out the help page for the docker command).  You can also modify a container and upload it to your own section of DockerHub.   Finally, check out Kubernetes - a framework for managing large numbers of containers with ease!</p>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
            <div id="generic-body-attributes" class="Body"></div>
          </div>
          


          <div style="height: 400px; width: 700px;  height: 400px; left: 0px; position: absolute; top: 15px; width: 700px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 700px; ">
              <img src="28_All_about_Nano_Server_%26_Windows_Containers_files/shapeimage_1.png" alt="" style="height: 400px; left: 0px; position: absolute; top: 0px; width: 700px; visibility: hidden; " id="generic-picture-attributes" />
            </div>
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 30px; left: 350px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext" title="" href="">next &gt;</a></p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 30px; left: 40px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev" title="" href="">&lt; previous</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


