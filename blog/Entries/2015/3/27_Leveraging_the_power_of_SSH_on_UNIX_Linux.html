<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.2" />
    <meta name="iWeb-Build" content="local-build-20200627" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Leveraging the power of SSH on UNIX/Linux</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="27_Leveraging_the_power_of_SSH_on_UNIX_Linux_files/27_Leveraging_the_power_of_SSH_on_UNIX_Linux.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='27_Leveraging_the_power_of_SSH_on_UNIX_Linux_files/27_Leveraging_the_power_of_SSH_on_UNIX_LinuxIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'blog.html';
iWebBlogMainPageTitle = 'blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="27_Leveraging_the_power_of_SSH_on_UNIX_Linux_files/27_Leveraging_the_power_of_SSH_on_UNIX_Linux.js"></script>
  </head>
  <body style="background: rgb(247, 246, 246); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(247, 246, 246); text-align: left; width: 700px; " id="body_content">
        <div style="float: left; height: 0px; line-height: 0px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 24px; opacity: 1.00; position: relative; width: 700px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .85em;\n\tcolor: #999;\n\tmargin: 0px;\n\tline-height: 20px;\n\tfont-weight: bold;\n}\n\n.navbar-bg {\n\ttext-align: left;\n\tpadding: 0px;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 15px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:hover\n{\n \tcolor: #F00;\n\ttext-decoration: none;\n}\n\n\nli.current-page a\n{\n\t color: #666;\n\ttext-decoration: none;\n\n}", "current-page-GUID": "3F9CBE75-F5BD-4B35-9E50-35A3B3B60A4E", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 416px; width: 620px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_620_41" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title"><span class="Color">Leveraging the power of SSH on UNIX/Linux</span></p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Title"></div>
          </div>
          


          <div id="id2" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 448px; width: 620px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_620_41" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">Friday, March 27, 2015</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 40px; margin-top: 484px; position: relative; width: 620px; z-index: 1; " class="style_SkipStroke_2 shape-with-text flowDefining">
            <div class="text-content style_External_620_1272" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="Body">UNIX (and Linux) systems have always been powerful by design - programs and utilities on these systems can be combined in ways that achieve wonderful things using shell piping, redirection, and an imagination.  This is often called UNIX kung foo......or just <span class="style_1">UNIX foo</span> ;-)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The topic of SSH file transfer using the scp command came up today in class, and I thought I’d take the opportunity to introduce some of this UNIX foo.  While the scp command is designed specifically for secure file copy, you can also be creative with the ssh command to achieve the same result.  The ssh command creates a secure tunnel to a remote host that can be used to obtain a remote shell.  But it can also be used to tunnel other information too - more specifically, large files and X Windows data.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Let’s start with a simple example of using UNIX foo to copy files (regardless of their contents - binary or otherwise) from one machine to another.  Say that you are the root user on your network and you want to copy stuff between Linux machines.  To copy the lala.bin file from your home directory on a remote computer (IP=192.168.1.140) to the current directory on your local system (keeping the same filename), you could use:<br /></p>
                <p class="paragraph_style">ssh 192.168.1.140 cat lala.bin &gt; lala.bin <br /></p>
                <p class="Body">(supply the root password when prompted)<br /><br /></p>
                <p class="Body">Similarly, you could copy the lala.bin file from your current directory to your home directory on a remote computer (IP=192.168.1.140) using the following command:<br /></p>
                <p class="paragraph_style">ssh 192.168.1.140 cat &lt;lala.bin &quot;&gt;&quot; lala.bin<br /></p>
                <p class="Body">(supply the root password when prompted)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">But UNIX foo doesn’t stop there - you can get even more creative!<br /></p>
                <p class="Body">For example, say that you have a Linux system on the network called OOBLA (IP address = 192.168.1.55) that has two hard disks (/dev/sda and /dev/sdb), and that the second hard disk (/dev/sdb) contains key data (user files, databases, etc.) that are important to back up each day.  And say that you wrote a small shell script that runs each day and creates a backup of the  /dev/sdb filesystem each day and copies it to another Linux server called BACKUPSERVER (IP address = 192.168.1.99).  This shell script could look something like this:<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">#!/bin/bash<br /></p>
                <p class="paragraph_style">if dd if=/dev/sdb of=/tmp/oobla-backup.img<br /></p>
                <p class="paragraph_style">then<br /></p>
                <p class="paragraph_style">mount -t nfs 192.168.1.99:/backups /remoteNFSshare<br /></p>
                <p class="paragraph_style">cp -F /tmp/oobla-backup.img /remoteNFSshare<br /></p>
                <p class="paragraph_style">rm /tmp/oobla-backup.img<br /></p>
                <p class="paragraph_style">fi<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">So what happens if the /dev/sdb filesystem on OOBLA gets corrupted?  <br /></p>
                <p class="Body">Well, you could copy the oobla-backup.img from the BACKUPSERVER back to your /tmp directory and then use the dd command to reimage it back to /dev/sdb.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">But that wouldn’t use UNIX foo. An easier solution would be to log into the BACKUPSERVER and run the following command:<br /></p>
                <p class="Body"><br /></p>
                <p class="Body"><span class="style_1">dd if=/backups/oobla-backup.img | ssh 192.168.1.55 dd of=/dev/sdb</span><br />(supply the root password when prompted)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">This will open the oobla-backup.img file within the dd command and send it sector-by-sector across an SSH tunnel to the OOBLA host (IP=192.168.1.55), where the remote dd command will complete the writing of the output to /dev/sdb - much faster!!!<br /><br /></p>
                <p class="Body">And yes, this would work if /dev/sda (hosting the OS itself) got corrupted on OOBLA - simply boot any small Linux via USB flash drive or CD/DVD into memory on OOBLA, set an IP on the network, and you can push a backup of /dev/sda from BACKUPSERVER to the small Linux system in memory on OOBLA and tell it to write /dev/sda sector-by-sector again!<br /></p>
                <p style="padding-bottom: 0pt; " class="Body"><br />Now, try some UNIX foo using other UNIX commands!<br /></p>
              </div>
            </div>
            <div id="generic-body-attributes" class="Body"></div>
          </div>
          


          <div style="height: 361px; width: 364px;  height: 361px; left: 168px; position: absolute; top: 53px; width: 364px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 364px; ">
              <img src="27_Leveraging_the_power_of_SSH_on_UNIX_Linux_files/shapeimage_1.png" alt="" style="height: 331px; left: 0px; position: absolute; top: 0px; width: 361px; visibility: hidden; " id="generic-picture-attributes" />
            </div>
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 30px; left: 350px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext" title="" href="">next &gt;</a></p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 30px; left: 40px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev" title="" href="">&lt; previous</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


