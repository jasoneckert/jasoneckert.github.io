<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20200628" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Using the Windows Subsystem for Linux</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="7_Using_the_Windows_Subsystem_for_Linux_files/7_Using_the_Windows_Subsystem_for_Linux.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='7_Using_the_Windows_Subsystem_for_Linux_files/7_Using_the_Windows_Subsystem_for_LinuxIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'blog.html';
iWebBlogMainPageTitle = 'blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebImage.js"></script>
    <script type="text/javascript" src="7_Using_the_Windows_Subsystem_for_Linux_files/7_Using_the_Windows_Subsystem_for_Linux.js"></script>
  </head>
  <body style="background: rgb(247, 246, 246); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(247, 246, 246); text-align: left; width: 700px; " id="body_content">
        <div style="float: left; height: 0px; line-height: 0px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 24px; opacity: 1.00; position: relative; width: 700px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .85em;\n\tcolor: #999;\n\tmargin: 0px;\n\tline-height: 20px;\n\tfont-weight: bold;\n}\n\n.navbar-bg {\n\ttext-align: left;\n\tpadding: 0px;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 15px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:hover\n{\n \tcolor: #F00;\n\ttext-decoration: none;\n}\n\n\nli.current-page a\n{\n\t color: #666;\n\ttext-decoration: none;\n\n}", "current-page-GUID": "3F9CBE75-F5BD-4B35-9E50-35A3B3B60A4E", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 416px; width: 620px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_620_41" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title"><span class="Color">Using the Windows Subsystem for Linux</span></p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Title"></div>
          </div>
          


          <div id="id2" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 448px; width: 620px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_620_41" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">Monday, January 7, 2019</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 40px; margin-top: 488px; position: relative; width: 620px; z-index: 1; " class="style_SkipStroke_4 shape-with-text flowDefining">
            <div class="text-content style_External_620_5624" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="Body">Tonight I did a presentation on how to use the Windows Subsystem for Linux (WSL) now that it has matured somewhat. In this blog post, I’ll summarize the key parts of my presentation for anyone wishing to learn more about WSL!<br /></p>
                <div class="paragraph Body"><div style="height: 207px; width: 300px;  clear: right; float: right; height: 207px; margin: 12px 0px 12px 12px; position: relative; width: 300px; " class="tinyText style_SkipStroke_2 inline-block stroke_0"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage.jpg" alt="" style="border: none; height: 207px; width: 300px; " /></div><br /></div>
                <p class="paragraph_style">1. So what is WSL?<br /></p>
                <p class="Body">Simply put, it’s a <span class="style_1">kernel interface</span> (lxcore &amp; lxss) that allows 64-bit Linux binaries to run on a Window 10 or Windows Server 2019 kernel.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">All you need to do is add the <span class="style_1">userland</span> (file system structure and programs) from an existing Linux distribution, such as Ubuntu, Kali, Debian or SUSE, and that Linux distribution will run natively on the Windows kernel!<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">You must access the Linux distribution via a Windows program that associates the userland of the Linux distribution to the WSL (e.g. for Kali Linux, this would be <span class="style_1">kali.exe</span>), and you can install and use <span class="style_1">multiple Linux distribution userlands simultaneously</span> with the WSL.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">WSL was <span class="style_1">designed to support developers</span> who have the need to create and test Linux software on Windows, without having to mess around with virtual machines running Linux.  And because it’s a developer technology, Microsoft is <span class="style_1">actively changing it all the time</span>. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">If you are interested in learning more about its architecture in depth, visit <a title="https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/" href="https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/">https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/</a>. It’s a bit outdated (for example, replace bash.exe below with kali.exe for the Kali Linux userland), but it provides a great amount of depth.<br /></p>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 281px; width: 610px;  height: 281px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_1"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_1.jpg" alt="" style="border: none; height: 282px; width: 610px; " /></div><br /></div>
                <p class="Body">  <br /></p>
                <p class="paragraph_style">2. How do I install WSL and a Linux userland on Windows 10?<br /></p>
                <p class="Body">Simply navigate to <span class="style_2">Settings</span>, <span class="style_2">Update &amp; Security</span> and <span class="style_2">For developers</span>. Next, enable <span class="style_2">Developer mode</span> and reboot. Finally navigate to <span class="style_2">Apps and Features</span>, <span class="style_2">Programs and Features</span>, <span class="style_2">Turn Windows features on or off</span>, and add the <span class="style_2">WSL</span> feature. This process is illustrated in the following screenshots:<br /></p>
                <div class="paragraph Body"> <div style="height: 337px; width: 610px;  height: 337px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_2"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_2.jpg" alt="" style="border: none; height: 337px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 473px; width: 610px;  height: 473px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_3"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_3.jpg" alt="" style="border: none; height: 473px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 473px; width: 610px;  height: 473px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_4"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_4.jpg" alt="" style="border: none; height: 473px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 343px; width: 610px;  height: 343px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_5"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_5.jpg" alt="" style="border: none; height: 344px; width: 610px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <p class="Body">Next, you can navigate to the Windows Store and search for Linux. There are currently five different Linux distributions that you can install - each one is approximately a 200MB download (800MB - 1.2GB footprint following installation before software is added). Make sure you read the notes next to the distribution you install for important links and information.  In the following screenshots, I chose to install the Kali Linux distribution. <br /></p>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 473px; width: 610px;  height: 473px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_6"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_6.jpg" alt="" style="border: none; height: 473px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 474px; width: 610px;  height: 474px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_7"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_7.jpg" alt="" style="border: none; height: 474px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 510px; width: 610px;  height: 510px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_8"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_8.jpg" alt="" style="border: none; height: 510px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">3. Completing the installation and using your Linux distribution:<br /></p>
                <p class="Body">One the download has completed, you can start your Linux distribution for the first time using the appropriate command (or icon on the Start menu):<br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_1"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>Ubuntu: <span class="style_1">ubuntu.exe</span><br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_1"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>openSUSE Leap 42: <span class="style_1">opensuse-42.exe<br /></span></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_1"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>SUSE Linux Enterprise Server 12: <span class="style_1">sles-12.exe<br /></span></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_1"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>Debian: <span class="style_1">debian.exe</span><br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 30px; text-indent: -20px; " class="full-width">
                    <p style="text-indent: -20px; " class="paragraph_style_1"><span style="font-size: 14px; " class="Bullet">•</span><span style="width: 15px; " class="inline-block"></span>Kali: <span class="style_1">kali.exe<br /></span></p>
                  </li>
                </ol>
                <p class="Body"><br /></p>
                <p class="Body">Since I installed Kali Linux, I ran kali.exe, and was prompted to specify a UNIX username and password, since it was my first time accessing the distribution:<br /></p>
                <p class="Body"><br /></p>
                <div class="paragraph Body"><div style="height: 175px; width: 610px;  height: 175px; position: relative; width: 610px; " class="tinyText style_SkipStroke_3 inline-block stroke_9"><img src="7_Using_the_Windows_Subsystem_for_Linux_files/droppedImage_9.jpg" alt="" style="border: none; height: 176px; width: 611px; " /></div><br /></div>
                <p class="Body"><br /></p>
                <p class="Body">You can then proceed to give the root user a password (<span class="style_1">sudo passwd root</span>), update your distribution, install software, and access Windows volumes like C:\. Kali Linux also comes with a script you can download to install X.org (which can be accessed using Remote Desktop Connection on port 3390).  Here are some relevant commands for Kali Linux:<br /></p>
                <p class="paragraph_style">su –<br /></p>
                <p class="paragraph_style">apt-get update<br /></p>
                <p class="paragraph_style">wget <a title="https://kali.sh/xfce4.sh" href="https://kali.sh/xfce4.sh">https://kali.sh/xfce4.sh</a> &amp;&amp; sh xfce.sh<br /></p>
                <p class="paragraph_style">/etc/init.d/xrdp start <span class="style_3">(connect to localhost:3390 within Remote Desktop Connection)<br /></span></p>
                <p class="paragraph_style">apt install metasploit-framework<br /></p>
                <p class="paragraph_style">apt install ssh<br /></p>
                <p class="paragraph_style">apt install xbill<br /></p>
                <p class="paragraph_style">apt install apache2 <span class="style_3">(or whole LAMP stack, if you like)<br /></span></p>
                <p class="paragraph_style">apachectl start <span class="style_3">(connect to localhost:80 within a Windows Web browser)<br /></span></p>
                <p class="paragraph_style">ls /mnt/c <br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style_2">Some important paths to understand include: <br /></p>
                <p class="paragraph_style">   C:\Users\name\AppData\Local\Microsoft\WindowsApps\KaliLinux.*\kali.exe<br /></p>
                <p class="Body">     This is the actual executable for the Linux distribution. <br /></p>
                <p class="Body"> <br /></p>
                <p class="Body">  <span class="style_1">C:\Users\name\AppData\Local\Packages\KaliLinux.*\<br /></span></p>
                <p class="Body">     This stores your Linux distribution userland (in this case Kali Linux).<br /></p>
                <p class="Body">     You should add this folder as an exception within your AV software if it barks at you!<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">   C:\Users\name\AppData\Local\Packages\KaliLinux.*\LocalState\rootfs<br /></p>
                <p class="Body">     This allows you to access the root filesystem in your Linux distribution userland. <br /></p>
                <p class="Body">     It uses a special filesystem called is VolFs.<br /></p>
                <p class="Body">     Copying to VoIFs is flakey, but accessing C:\ from WSL (/mnt/c) is not flakey.<br /></p>
                <p class="Body">     This means that you must use symlinks to access Windows dev content (via /mnt/c).<br /></p>
                <p class="Body"><br /></p>
                <p style="padding-bottom: 0pt; " class="Body">Since WSL is only a kernel interface, and not a real Linux kernel, any software the requires kernel modules or low-level access to Linux components, such as the IP stack, will produce and error if you try to execute them (unless Microsoft builds the equivalent functionality into WSL). This includes programs like <span class="style_1">nmap</span>, <span class="style_1">Wireshark</span>, and so on. Remember that WSL was designed for developers. However, it can easily be used to perform remote administration of other systems (<span class="style_1">ssh</span> and <span class="style_1">python</span> work very well), or even provide remote systems the ability to connect to Windows via <span class="style_1">sshd</span> (openssh-server). Plus, it looks cool - look ma, I’m running Linux without virtual machines!</p>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
            <div id="generic-body-attributes" class="Body"></div>
          </div>
          


          <div style="height: 400px; width: 700px;  height: 400px; left: 0px; position: absolute; top: 14px; width: 700px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 700px; ">
              <img src="7_Using_the_Windows_Subsystem_for_Linux_files/shapeimage_1.png" alt="" style="height: 400px; left: 0px; position: absolute; top: 0px; width: 700px; visibility: hidden; " id="generic-picture-attributes" />
            </div>
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 30px; left: 350px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_5 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext" title="" href="">next &gt;</a></p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 30px; left: 40px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_5 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev" title="" href="">&lt; previous</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


