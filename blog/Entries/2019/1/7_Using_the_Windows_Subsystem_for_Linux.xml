<?xml version="1.0"?>
<content collectionGUID="6CD99A98-03EA-45F6-9464-3BE6AB01739F">
  <lastEdited clientType="local-build-20200225" date="2020-02-25 20:58:33 +0000"/>
  <textBox id="generic-title-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Using the Windows Subsystem for Linux&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-datefield-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Monday, January 7, 2019&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-body-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Tonight I did a presentation on how to use the Windows Subsystem for Linux (WSL) now that it has matured somewhat. In this blog post, I&#x2019;ll summarize the key parts of my presentation for anyone wishing to learn more about WSL!&#xD;&#xD;&lt;/b&gt;&lt;b&gt;1. So what is WSL?&#xD;&lt;/b&gt;&lt;b&gt;Simply put, it&#x2019;s a &lt;/b&gt;&lt;b&gt;kernel interface&lt;/b&gt;&lt;b&gt; (lxcore &amp; lxss) that allows 64-bit Linux binaries to run on a Window 10 or Windows Server 2019 kernel.&#xD;&#xD;All you need to do is add the &lt;/b&gt;&lt;b&gt;userland&lt;/b&gt;&lt;b&gt; (file system structure and programs) from an existing Linux distribution, such as Ubuntu, Kali, Debian or SUSE, and that Linux distribution will run natively on the Windows kernel!&#xD;&#xD;You must access the Linux distribution via a Windows program that associates the userland of the Linux distribution to the WSL (e.g. for Kali Linux, this would be &lt;/b&gt;&lt;b&gt;kali.exe&lt;/b&gt;&lt;b&gt;), and you can install and use &lt;/b&gt;&lt;b&gt;multiple Linux distribution userlands simultaneously&lt;/b&gt;&lt;b&gt; with the WSL.&#xD;&#xD;WSL was &lt;/b&gt;&lt;b&gt;designed to support developers&lt;/b&gt;&lt;b&gt; who have the need to create and test Linux software on Windows, without having to mess around with virtual machines running Linux.  And because it&#x2019;s a developer technology, Microsoft is &lt;/b&gt;&lt;b&gt;actively changing it all the time&lt;/b&gt;&lt;b&gt;. &#xD;&#xD;If you are interested in learning more about its architecture in depth, visit &lt;/b&gt;&lt;b&gt;&lt;a href="https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/"&gt;https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/&lt;/a&gt;&lt;/b&gt;&lt;b&gt;. It&#x2019;s a bit outdated (for example, replace bash.exe below with kali.exe for the Kali Linux userland), but it provides a great amount of depth.&#xD;&#xD;&#xD;  &#xD;&lt;/b&gt;&lt;b&gt;2. How do I install WSL and a Linux userland on Windows 10?&#xD;&lt;/b&gt;&lt;b&gt;Simply navigate to &lt;/b&gt;&lt;b&gt;&lt;i&gt;Settings&lt;/i&gt;&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;&lt;i&gt;Update &amp; Security&lt;/i&gt;&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;&lt;i&gt;For developers&lt;/i&gt;&lt;/b&gt;&lt;b&gt;. Next, enable &lt;/b&gt;&lt;b&gt;&lt;i&gt;Developer mode&lt;/i&gt;&lt;/b&gt;&lt;b&gt; and reboot. Finally navigate to &lt;/b&gt;&lt;b&gt;&lt;i&gt;Apps and Features&lt;/i&gt;&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;&lt;i&gt;Programs and Features&lt;/i&gt;&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;&lt;i&gt;Turn Windows features on or off&lt;/i&gt;&lt;/b&gt;&lt;b&gt;, and add the &lt;/b&gt;&lt;b&gt;&lt;i&gt;WSL&lt;/i&gt;&lt;/b&gt;&lt;b&gt; feature. This process is illustrated in the following screenshots:&#xD; &#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;Next, you can navigate to the Windows Store and search for Linux. There are currently five different Linux distributions that you can install - each one is approximately a 200MB download (800MB - 1.2GB footprint following installation before software is added). Make sure you read the notes next to the distribution you install for important links and information.  In the following screenshots, I chose to install the Kali Linux distribution. &#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;3. Completing the installation and using your Linux distribution:&#xD;&lt;/b&gt;&lt;b&gt;One the download has completed, you can start your Linux distribution for the first time using the appropriate command (or icon on the Start menu):&#xD;&lt;/b&gt;&lt;b&gt;	&#x2022;	Ubuntu: &lt;/b&gt;&lt;b&gt;ubuntu.exe&lt;/b&gt;&lt;b&gt;&#xD;	&#x2022;	openSUSE Leap 42: &lt;/b&gt;&lt;b&gt;opensuse-42.exe&#xD;&lt;/b&gt;&lt;b&gt;	&#x2022;	SUSE Linux Enterprise Server 12: &lt;/b&gt;&lt;b&gt;sles-12.exe&#xD;&lt;/b&gt;&lt;b&gt;	&#x2022;	Debian: &lt;/b&gt;&lt;b&gt;debian.exe&lt;/b&gt;&lt;b&gt;&#xD;	&#x2022;	Kali:&#xA0;&lt;/b&gt;&lt;b&gt;kali.exe&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Since I installed Kali Linux, I ran kali.exe, and was prompted to specify a UNIX username and password, since it was my first time accessing the distribution:&#xD;&#xD;&#xD;&#xD;You can then proceed to give the root user a password (&lt;/b&gt;&lt;b&gt;sudo passwd root&lt;/b&gt;&lt;b&gt;), update your distribution, install software, and access Windows volumes like C:\. Kali Linux also comes with a script you can download to install X.org (which can be accessed using Remote Desktop Connection on port 3390).  Here are some relevant commands for Kali Linux:&#xD;&lt;/b&gt;&lt;b&gt;su &#x2013;&#xD;apt-get update&#xD;wget &lt;/b&gt;&lt;b&gt;&lt;a href="https://kali.sh/xfce4.sh"&gt;https://kali.sh/xfce4.sh&lt;/a&gt;&lt;/b&gt;&lt;b&gt; &amp;&amp; sh xfce.sh&#xD;/etc/init.d/xrdp start &lt;/b&gt;&lt;b&gt;(connect to localhost:3390 within Remote Desktop Connection)&#xD;&lt;/b&gt;&lt;b&gt;apt install metasploit-framework&#xD;apt install ssh&#xD;apt install xbill&#xD;apt install apache2 &lt;/b&gt;&lt;b&gt;(or whole LAMP stack, if you like)&#xD;&lt;/b&gt;&lt;b&gt;apachectl start &lt;/b&gt;&lt;b&gt;(connect to localhost:80 within a Windows Web browser)&#xD;&lt;/b&gt;&lt;b&gt;ls /mnt/c &#xD;&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;Some important paths to understand include: &#xD;&lt;/b&gt;&lt;b&gt;   C:\Users\name\AppData\Local\Microsoft\WindowsApps\KaliLinux.*\kali.exe&#xD;&lt;/b&gt;&lt;b&gt;     This is the actual executable for the Linux distribution. &#xD; &#xD;  &lt;/b&gt;&lt;b&gt;C:\Users\name\AppData\Local\Packages\KaliLinux.*\&#xD;&lt;/b&gt;&lt;b&gt;     This stores your Linux distribution userland (in this case Kali Linux).&#xD;     You should add this folder as an exception within your AV software if it barks at you!&#xD;&#xD;&lt;/b&gt;&lt;b&gt;   C:\Users\name\AppData\Local\Packages\KaliLinux.*\LocalState\rootfs&#xD;&lt;/b&gt;&lt;b&gt;     This allows you to access the root filesystem in your Linux distribution userland. &#xD;     It uses a special filesystem called is VolFs.&#xD;     Copying to VoIFs is flakey, but accessing C:\ from WSL (/mnt/c) is not flakey.&#xD;     This means that you must use symlinks to access Windows dev content (via /mnt/c).&#xD;&#xD;Since WSL is only a kernel interface, and not a real Linux kernel, any software the requires kernel modules or low-level access to Linux components, such as the IP stack, will produce and error if you try to execute them (unless Microsoft builds the equivalent functionality into WSL). This includes programs like &lt;/b&gt;&lt;b&gt;nmap&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;Wireshark&lt;/b&gt;&lt;b&gt;, and so on. Remember that WSL was designed for developers. However, it can easily be used to perform remote administration of other systems (&lt;/b&gt;&lt;b&gt;ssh&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;python&lt;/b&gt;&lt;b&gt; work very well), or even provide remote systems the ability to connect to Windows via &lt;/b&gt;&lt;b&gt;sshd&lt;/b&gt;&lt;b&gt; (openssh-server). Plus, it looks cool - look ma, I&#x2019;m running Linux without virtual machines!&lt;/b&gt;</richText>
  </textBox>
  <image id="generic-picture-attributes" dynamic="no" visible="yes" src="7_Using_the_Windows_Subsystem_for_Linux_files/shapeimage_1.png" left="0px" top="0px" width="700px" height="400px"/>
</content>
