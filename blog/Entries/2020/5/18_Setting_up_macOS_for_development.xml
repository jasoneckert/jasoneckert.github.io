<?xml version="1.0"?>
<content collectionGUID="6CD99A98-03EA-45F6-9464-3BE6AB01739F">
  <lastEdited clientType="local-build-20200519" date="2020-05-20 01:06:12 +0000"/>
  <textBox id="generic-title-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Customizing macOS for development&#xD;&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-datefield-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Monday, May 18, 2020&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-body-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;So your boss gave you a Mac for development. Or maybe you bought a Mac because you have to develop iOS apps. Or maybe you bought a MacBook because you need to develop software as well as look good at Starbucks (after the pandemic is over, of course).&#xD;&#xD;The only bummer about macOS is that it&#x2019;s &lt;/b&gt;&lt;b&gt;Aqua&lt;/b&gt;&lt;b&gt; desktop sucks for productivity. If you look over the shoulder of most Mac users, you&#x2019;ll notice that their desktop looks like a very messy desk. Once you start using macOS for serious work, you&#x2019;ll quickly realize that this is largely caused by the design of Aqua and not the user. Apple designed every aspect of Aqua to fit the needs of the most novice users, and not power users such as developers. Luckily, there are several things you can do to tweak your Mac into a fast developer workstation that boasts an interface that includes the productivity features available on Windows 10 and Linux desktops. In this blog post, I&#x2019;ll share my general recommendations for turning macOS into a developer workstation.&#xD;&#xD;This blog post assumes you know the basic structure of the macOS operating system. If you don&#x2019;t, or you&#x2019;re somewhat new to macOS but have some Linux knowledge, read &lt;/b&gt;&lt;b&gt;&lt;a href="perma://BLPageReference/83A260AE-6E1D-43F7-9D67-B9BCA82207B2"&gt;my &#x201C;macOS for Linux Admins&#x201D; blog post&lt;/a&gt;&lt;/b&gt;&lt;b&gt; first!  &#xD;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;1. Install macOS a second time&#xD;&lt;/b&gt;&lt;b&gt;&#xD;This is something I highly recommend on any developer workstation, for reasons I&#x2019;ll get to shortly. You can easily (and safely) install macOS multiple times on the same system because Apple now uses the APFS filesystem, which supports logical volumes on the same underlying partition. &#xD;&#xD;Modern Macs come with a small ARM processor called the &lt;/b&gt;&lt;b&gt;T2 chip&lt;/b&gt;&lt;b&gt; that acts as the SSD controller, sound controller, touchbar controller, Trusted Platform Module (TPM), and pretty much anything else Apple wants to cram in there to save cost and maximize profit. When you get a new Mac, the filesystem on the SSD is encrypted by default, and this encryption is performed by the T2 chip. While this is generally a good thing for personal files, it causes havoc if you perform many small writes to the filesystem because the T2 chip just can&#x2019;t handle the load like other storage controllers can (it was designed for the storage needs of Facebook users at Starbucks, not the demands of a developer workstation). Thus, if you are testing a containerized app using a Docker/LinuxKit setup, K8s, or a Linux/Windows virtual machine (which incur a large storage performance cost on macOS for some reason), it&#x2019;s best to create another &#x201C;development&#x201D; installation of macOS alongside your default &#x201C;personal&#x201D; installation of macOS that is not encrypted to ensure that the T2 chip can give you fast storage performance. Each time you boot your Mac, you can hold down the &lt;/b&gt;&lt;b&gt;Option&lt;/b&gt;&lt;b&gt; key on your keyboard to get a menu that allows you to choose which macOS installation you want to boot (development or personal).&#xD;&#xD;Another reason why it&#x2019;s good to install macOS a second time is that your personal and development installations can have different Apple IDs attached to them, which means that you can separate your personal Apple ID from an Apple ID that is used for developing software, or part of an Apple Developer Program for your organization.&#xD;&#xD;To install macOS a second time, you must first create a new APFS logical volume. Open &lt;/b&gt;&lt;b&gt;Disk Utility&lt;/b&gt;&lt;b&gt; (/Applications/Utilities/Disk Utility), click the drop-down menu beside the View button in the toolbar and choose &lt;/b&gt;&lt;b&gt;Show All Devices&lt;/b&gt;&lt;b&gt;. Next, click the &lt;/b&gt;&lt;b&gt;+ &lt;/b&gt;&lt;b&gt;button to create a new APFS volume. Give your APFS volume a name (e.g. development) and optionally set a  Reserve (minimum) or Quota (maximum) size if you want to guarantee or limit the space the new logical volume can consume from the underlying partition, respectively.  &#xD;&#xD;Once you have a new volume, you can open the &lt;/b&gt;&lt;b&gt;App Store&lt;/b&gt;&lt;b&gt;, search for &lt;/b&gt;&lt;b&gt;macOS Catalina&lt;/b&gt;&lt;b&gt; and choose to download it (8GB). When the download is finished, the installation will start automatically. At the beginning of the installation, you&#x2019;ll be prompted for the volume to install macOS to. Simply choose the new volume you created (e.g. development) and proceed through the rest of the installation normally. The new volume will not be encrypted, and the system will automatically boot into macOS installed on your new volume (unless you hold down the Option key at boot time and select your personal macOS installation).&#xD;&#xD;Once you&#x2019;re booted into your new (development) macOS installation, you can set up your developer environment. I&#x2019;ve outlined some stuff you&#x2019;ll want to do at minimum in the following sections:&#xD;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;2. Install a package manager &#xD;&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;In order to make macOS a useful developer workstation, you need to add a LOT of open source software to it. &lt;/b&gt;&lt;b&gt;Homebrew&lt;/b&gt;&lt;b&gt; (or just &lt;/b&gt;&lt;b&gt;brew&lt;/b&gt;&lt;b&gt;) is a proper package manger for macOS that allows you to obtain open source software from GitHub and compile it (if necessary) to run on macOS with simple commands. For example, &lt;/b&gt;&lt;b&gt;brew install neofetch&lt;/b&gt;&lt;b&gt; &lt;/b&gt;&lt;b&gt;will install neofetch while &lt;/b&gt;&lt;b&gt;brew install nvim&lt;/b&gt;&lt;b&gt; will install neovim. You can also use brew to remove software or restart services that were installed via brew. Most open source software that you&#x2019;re ever going to need can be installed using brew if there isn&#x2019;t a pre-compiled binary available from some website. To install, go to &lt;/b&gt;&lt;b&gt;&lt;a href="https://brew.sh/"&gt;https://brew.sh/&lt;/a&gt;&lt;/b&gt;&lt;b&gt; and copy the command shown into a terminal window. This will first download the Xcode command line tools (which can take a while) before installing the Homebrew system files.&#xD;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;3. Install a better terminal, code editor and font set&#xD;&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;The three I&#x2019;ve chosen below are the ones I use the most, but you may prefer different packages, or additional ones depending on your development needs. For example, you may need to install additional developer frameworks and IDEs for your development (my recommendations here don&#x2019;t assume what sort of development you&#x2019;ll be doing).&#xD;&lt;/b&gt;&lt;b&gt;&#xD;iTerm &lt;/b&gt;&lt;b&gt;is a fully customizable terminal emulator that you should use instead of the default terminal emulator that comes with macOS (/Applications/Utilities/Terminal.app). You can download the iTerm binary from &lt;/b&gt;&lt;b&gt;&lt;a href="https://www.iterm2.com/"&gt;https://www.iterm2.com/&lt;/a&gt;&lt;/b&gt;&lt;b&gt;, move the downloaded iTerm2 binary to your /Applications folder and create a link to it on your Dock for easy access.&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Visual Studio Code &lt;/b&gt;&lt;b&gt;is arguably the best code editor you can get, and fully customizable. Of course the traditional vi/vim editor is great, but Visual Studio is better suited for development. You can download the binary from &lt;/b&gt;&lt;b&gt;&lt;a href="https://code.visualstudio.com/"&gt;https://code.visualstudio.com/&lt;/a&gt;&lt;/b&gt;&lt;b&gt;, move the downloaded binary to your /Applications folder and create a link to it on your Dock for easy access.&#xD;&#xD;&lt;/b&gt;&lt;b&gt;Nerd Fonts &lt;/b&gt;&lt;b&gt;are incredibly valuable the more you dive into customizing your desktop experience and settings within customizable apps (trust me). As their GitHub site says, &#x201C;Nerd Fonts takes popular programming fonts and adds a bunch of Glyphs&#x201D; (&lt;/b&gt;&lt;b&gt;&lt;a href="https://github.com/ryanoasis/nerd-fonts"&gt;https://github.com/ryanoasis/nerd-fonts&lt;/a&gt;&lt;/b&gt;&lt;b&gt;).&#xA0;You can install them using the following brew commands:&#xD;&lt;/b&gt;&lt;b&gt;   brew tap homebrew/cask-fonts&#xD;   brew cask install font-hack-nerd-font&#xD;&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;4. Install an automatic tiling window manager&#xD;&lt;/b&gt;&lt;b&gt;&#xD;To avoid the mess that is Aqua, you&#x2019;ll need a proper window manager. You&#x2019;ll want to install &lt;/b&gt;&lt;b&gt;yabai&lt;/b&gt;&lt;b&gt; (&lt;/b&gt;&lt;b&gt;&lt;a href="https://github.com/koekeishiya/yabai"&gt;https://github.com/koekeishiya/yabai&lt;/a&gt;&lt;/b&gt;&lt;b&gt;), which manages the windows that you have on your system automatically so that everything is organized perfectly.&#xD;&#xD;Unfortunately, you have to disable two features of macOS System Integrity Protection (SIP) to allow yabai to work. If you research them, you&#x2019;ll find that they are quite minor, and you&#x2019;re only disabling them on your second (development) macOS installation only, so it won&#x2019;t affect your personal installation of macOS.&#xD;&#xD;To disable these two features of SIP, power down your computer and then boot it while holding down the &lt;/b&gt;&lt;b&gt;Command (&lt;/b&gt;&lt;b&gt;&#x2318;&lt;/b&gt;&lt;b&gt;) + R&lt;/b&gt;&lt;b&gt;&#xA0;key combination to enter recovery mode. Log into your second installation of macOS when prompted and select Terminal from the&#xA0;Utilities menu. Next, type the following command (ignore any warnings) and reboot normally afterwards:&#xD;&lt;/b&gt;&lt;b&gt;   csrutil enable --without debug --without fs&lt;/b&gt;&lt;b&gt; &#xD;&#xD;Following this, you can install yabai using brew, and then start and allow yabai to run on your system. The steps to do this are listed here: &lt;/b&gt;&lt;b&gt;&lt;a href="https://github.com/koekeishiya/yabai/wiki/Installing-yabai-(latest-release)"&gt;https://github.com/koekeishiya/yabai/wiki/Installing-yabai-(latest-release)&lt;/a&gt;&lt;/b&gt;&lt;b&gt;. You&#x2019;ll also need to create a &lt;/b&gt;&lt;b&gt;~/&lt;/b&gt;&lt;b&gt;.yabairc&lt;/b&gt;&lt;b&gt; file with the configuration you want. The example yabairc file listed on the yabai website would probably suit your needs, and the options within are fairly self-explanatory. That being said, here is &lt;/b&gt;&lt;b&gt;&lt;a href="yabairc.txt"&gt;my &lt;/a&gt;&lt;/b&gt;&lt;b&gt;&lt;a href="yabairc.txt"&gt;~/&lt;/a&gt;&lt;/b&gt;&lt;b&gt;&lt;a href="yabairc.txt"&gt;.yabairc configuration&lt;/a&gt;&lt;/b&gt;&lt;b&gt; in case you want to paste it into your &lt;/b&gt;&lt;b&gt;~/&lt;/b&gt;&lt;b&gt;.yabairc file. &#xD;&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;5. Install a hotkey daemon&#xD;&lt;/b&gt;&lt;b&gt;&#xD;As a programmer, there is nothing more important than a great set of customized keyboard shortcuts for everything you need to do. That&#x2019;s where a hotkey daemon, such as &lt;/b&gt;&lt;b&gt;skhd&lt;/b&gt;&lt;b&gt; (&lt;/b&gt;&lt;b&gt;&lt;a href="https://github.com/koekeishiya/skhd"&gt;https://github.com/koekeishiya/skhd&lt;/a&gt;&lt;/b&gt;&lt;b&gt;) comes in. You can install and start the skhd hotkey daemon using brew:&#xD;&lt;/b&gt;&lt;b&gt;   brew install koekeishiya/formulae/skhd&#xD;   brew services start skhd&#xD;&lt;/b&gt;&lt;b&gt;&#xD;You&#x2019;ll also need to create a &lt;/b&gt;&lt;b&gt;~/.skhdrc&lt;/b&gt;&lt;b&gt; file with the configuration you want. The example .skhdrc file listed on the skhd website has lots of great examples, but here is &lt;/b&gt;&lt;b&gt;&lt;a href="skhdrc.txt"&gt;my &lt;/a&gt;&lt;/b&gt;&lt;b&gt;&lt;a href="skhdrc.txt"&gt;~&lt;/a&gt;&lt;/b&gt;&lt;b&gt;&lt;a href="skhdrc.txt"&gt;/.skhdrc configuration&lt;/a&gt;&lt;/b&gt;&lt;b&gt; in case you want to paste it into your&lt;/b&gt;&lt;b&gt; ~/.skhdrc file.&lt;/b&gt;&lt;b&gt; In my &lt;/b&gt;&lt;b&gt;~/.skhdrc file, t&lt;/b&gt;&lt;b&gt;he first three lines set keyboard shortcuts for my main apps (the open command searches /Applications for the name specified):&#xD;&lt;/b&gt;&lt;b&gt;   cmd - return : open -a iTerm&#xD;   cmd + shift - return : open -a "Visual Studio Code"&#xD;   alt - return : open -a Firefox&#xD;&lt;/b&gt;&lt;b&gt;&#xD;The remaining (many) lines of my &lt;/b&gt;&lt;b&gt;~/.skhdrc file&lt;/b&gt;&lt;b&gt; create shortcuts that use yabai to modify window behavior. For example, to shift window focus:&#xD;&lt;/b&gt;&lt;b&gt;   alt - left : yabai -m window --focus west&#xD;   alt - down : yabai -m window --focus south&#xD;   alt - up : yabai -m window --focus north&#xD;   alt - right : yabai -m window --focus east&#xD;&lt;/b&gt;&lt;b&gt;&#xD;You&#x2019;ll want to spend time to look over and modify these shortcuts to suit your needs!&#xD;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;6. Clean up Aqua and install a widget system&#xD;&lt;/b&gt;&lt;b&gt;&#xD;The next thing you should do is get the annoying parts of Aqua off your desktop to minimize distractions. Open &lt;/b&gt;&lt;b&gt;System Preferences&lt;/b&gt;&lt;b&gt;, go to General and auto-hide the menu bar. Next, go to Dock in System Preferences and move your Dock position to the right of the screen (since we tile windows from left to right and want to maximize the vertical space used by them). Also choose the option to auto-hide the Dock so that it stays out of view unless you need it.&#xD;&#xD;Of course, there are always some things you&#x2019;ll want to always have on your desktop in the absence of a menu bar or Dock. For these, you can install a widget system, such as &lt;/b&gt;&lt;b&gt;&#xDC;bersicht&lt;/b&gt;&lt;b&gt;. You can download the &lt;/b&gt;&lt;b&gt;&#xDC;bersicht&lt;/b&gt;&lt;b&gt; binary from &lt;/b&gt;&lt;b&gt;&lt;a href="http://tracesof.net/uebersicht/"&gt;http://tracesof.net/uebersicht/&lt;/a&gt;&lt;/b&gt;&lt;b&gt;, move it to your /Applications folder, and create a link to it on your Dock for easy access. The &lt;/b&gt;&lt;b&gt;&#xDC;bersicht website also has widgets for you to download and drag to your widgets folder (you can see this folder by selecting Open Widgets Folder from the &#xDC;bersicht menu in the top menu bar). &lt;/b&gt;&lt;b&gt;To customize the widgets, edit the .jsx file (they are written in JavaScript + React's JSX) and possibly the related .json file, depending on the widget. &#xD;&#xD;The three widgets I have on my desktop (shown below) display the top Hacker News posts in the upper left, system statistics and time information in the lower left, and a random XKCD comic in the lower right (for sanity purposes):&#xD;&#xD;&#xD;&#xD;If you want the 80s-style Mount Fuji wallpaper (courtesy of r/unixporn), you can get it here: &lt;/b&gt;&lt;b&gt;&lt;a href="https://github.com/Who23/dots/blob/master/walls/wallpaper.jpg"&gt;https://github.com/Who23/dots/blob/master/walls/wallpaper.jpg&lt;/a&gt;&lt;/b&gt;&lt;b&gt;&#xD;&#xD;When you open applications (using skhd shortcuts), their layout will be adjusted automatically by yabai as shown below:&#xD;&#xD;&#xD;&#xD;You&#x2019;ll notice that I use &lt;/b&gt;&lt;b&gt;tmux&lt;/b&gt;&lt;b&gt; in my iTerm2 alongside a &lt;/b&gt;&lt;b&gt;starship&lt;/b&gt;&lt;b&gt; prompt to maximize my screen real estate. Both of these can easily be installed using brew:&#xD;&lt;/b&gt;&lt;b&gt;   brew install tmux&#xD;   brew install starship&lt;/b&gt;&lt;b&gt; &#xD;          (you must also add eval &lt;/b&gt;&lt;b&gt;"$(starship init zsh)"&lt;/b&gt;&lt;b&gt; to your &lt;/b&gt;&lt;b&gt;~/&lt;/b&gt;&lt;b&gt;.zshrc&lt;/b&gt;&lt;b&gt;)&#xD;&#xD;That&#x2019;s pretty much the basic configuration I&#x2019;d recommend doing for any developer using macOS. I hope you find it helpful!&lt;/b&gt;</richText>
  </textBox>
  <image id="generic-picture-attributes" dynamic="no" visible="yes" src="18_Setting_up_macOS_for_development_files/shapeimage_1.png" left="0px" top="0px" width="700px" height="400px"/>
</content>
