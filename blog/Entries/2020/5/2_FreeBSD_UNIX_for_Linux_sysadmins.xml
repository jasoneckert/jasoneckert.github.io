<?xml version="1.0"?>
<content collectionGUID="6CD99A98-03EA-45F6-9464-3BE6AB01739F">
  <lastEdited clientType="local-build-20200628" date="2020-06-28 12:33:19 +0000"/>
  <textBox id="generic-title-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;FreeBSD UNIX for Linux sysadmins&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-datefield-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;Saturday, May 2, 2020&lt;/b&gt;</richText>
  </textBox>
  <textBox id="generic-body-attributes" dynamic="no" visible="yes">
    <richText>&lt;b&gt;If you&#x2019;ve ever installed and explored another Linux distro (what Linux sysadmin hasn&#x2019;t?!?), then exploring FreeBSD is going be somewhat similar with a few key differences. &#xD;&#xD;While there is no graphical installation, the installation process is straightforward and similar to installing a server-based Linux distro. Just make sure you choose the &lt;/b&gt;&lt;b&gt;local_unbound&lt;/b&gt;&lt;b&gt; package when prompted if you want to cache DNS lookups locally, as FreeBSD doesn&#x2019;t have a built-in local DNS resolver that does this.&#xD;&#xD;Following installation, the directory structure is almost identical to Linux. Of course, you&#x2019;ll notice some small differences here and there (e.g. regular user home directories are located under /usr/home instead of /home). Standard UNIX commands such as &lt;/b&gt;&lt;b&gt;ls&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;chmod&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;find&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;which&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;ps&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;nice&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;ifconfig&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;netstat&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;&lt;b&gt;sockstat&lt;/b&gt;&lt;b&gt; (the &lt;/b&gt;&lt;b&gt;ss&lt;/b&gt;&lt;b&gt; command in Linux) are exactly as you&#x2019;d expect, but with some different options here and there that you&#x2019;ll see in the &lt;/b&gt;&lt;b&gt;man&lt;/b&gt;&lt;b&gt; pages. And yes, &lt;/b&gt;&lt;b&gt;reboot&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;poweroff&lt;/b&gt;&lt;b&gt; are there too.&#xD;&#xD;&lt;/b&gt;&lt;b&gt;Why FreeBSD?&#xD;&lt;/b&gt;&lt;b&gt;&#xD;The main benefit FreeBSD has over Linux is &lt;/b&gt;&lt;b&gt;speed&lt;/b&gt;&lt;b&gt;. You thought Linux was fast? Try FreeBSD. It has the fastest IP stack of any operating system by a long shot. Since it&#x2019;s UNIX and you can provide the same services (e.g. Samba, Apache, NFS, Nginx), this means you can provide them faster and leaner.  &#xD;&#xD;FreeBSD has also kept to its &lt;/b&gt;&lt;b&gt;KISS (Keep It Simple Stupid)&lt;/b&gt;&lt;b&gt; UNIX roots without compromising features, while Linux configuration gets more and more complex as time goes on. Want to start a service at boot time? You just add a line that says &lt;/b&gt;&lt;b&gt;servicename=&#x201D;YES&#x201D;&lt;/b&gt;&lt;b&gt; to a small text file (described later). And this small text file stores 90% of your system configuration, including your IP settings. In short, configuring a FreeBSD system is both fun and addictive.&#xD;&#xD;While configuring FreeBSD is easy, it&#x2019;s also incredibly powerful. There are granular security features and system configuration/recovery features in FreeBSD that you won&#x2019;t find in other operating systems. For those who want to go down that rabbit hole, it&#x2019;s well worth your time! And, of course, native support for ZFS (the most advanced filesystem on the planet) is a big plus. &#xD;&#xD;In the following sections, I&#x2019;ll describe some key differences and features of FreeBSD that you&#x2019;ll want to know coming from a Linux sysadmin background. Of course, I&#x2019;m assuming that you already know the associated topics in Linux before reading these sections! Key filenames and components are in &lt;/b&gt;&lt;b&gt;red&lt;/b&gt;&lt;b&gt;, while commands and configuration parameters are in &lt;/b&gt;&lt;b&gt;code font&lt;/b&gt;&lt;b&gt;.&#xD;&#xD;&lt;/b&gt;&lt;b&gt;1. System configuration&#xD;&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;/etc/rc.conf &lt;/b&gt;&lt;b&gt;contains nearly all system configuration, including IP configuration, hostname, default GW, services (daemons) that should start at boot time, and so on. Lines within this file have &lt;/b&gt;&lt;b&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/b&gt;&lt;b&gt;=&lt;/b&gt;&lt;b&gt;&lt;i&gt;value&lt;/i&gt;&lt;/b&gt;&lt;b&gt; syntax and are easy to edit using a text editor, such as &lt;/b&gt;&lt;b&gt;vi&lt;/b&gt;&lt;b&gt;. You can also  use the &lt;/b&gt;&lt;b&gt;sysrc -a&lt;/b&gt;&lt;b&gt; command to show all of the configured values in /etc/rc.conf, or the &lt;/b&gt;&lt;b&gt;sysrc &lt;/b&gt;&lt;b&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/b&gt;&lt;b&gt;=&lt;/b&gt;&lt;b&gt;&lt;i&gt;value&lt;/i&gt;&lt;/b&gt;&lt;b&gt; to modify or add configuration.&#xD;&#xD;FreeBSD stores the default parameters for configuration files in a defaults subdirectory. For example, &lt;/b&gt;&lt;b&gt;/etc/defaults/rc.conf&lt;/b&gt;&lt;b&gt; stores a large number of system-configured defaults that are overridden by /etc/rc.conf. Never change the entries in /etc/defaults/rc.conf - instead, just override them by adding the same lines to /etc/rc.conf with the values you want. There&#x2019;s also a /&lt;/b&gt;&lt;b&gt;etc/rc.conf.d/&lt;/b&gt;&lt;b&gt; directory that software packages can add files to that set system parameters (it&#x2019;s empty on a default installation of FreeBSD).&#xD;&#xD;&lt;/b&gt;&lt;b&gt;2. Boot loader and kernel configuration&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Boot loader configuration is stored in &lt;/b&gt;&lt;b&gt;/boot/loader.conf &lt;/b&gt;&lt;b&gt;(and &lt;/b&gt;&lt;b&gt;/boot/defaults/loader.conf&lt;/b&gt;&lt;b&gt;), and uses the same syntax as /etc/rc.conf.&#xD;&#xD;To view modules inserted into the kernel, you can use &lt;/b&gt;&lt;b&gt;kldstat&lt;/b&gt;&lt;b&gt;. You can also load and unload modules manually. For example:&#xD;  &lt;/b&gt;&lt;b&gt;kldload linprocfs.ko&lt;/b&gt;&lt;b&gt;      (loads the Linux procfs filesystem module) &#xD;  &lt;/b&gt;&lt;b&gt;kldunload linprocfs.ko&lt;/b&gt;&lt;b&gt;      (unloads the same module)&#xD;&#xD;To make sure this module gets loaded automatically each time you boot, you could add the following line to the /boot/loader.conf file: &#xD;  &lt;/b&gt;&lt;b&gt;[cmd=]kldload /boot/kernel/linprocfs.ko[/cmd]&lt;/b&gt;&lt;b&gt;&#xD;&#xD;The FreeBSD kernel also has many properties and parameters that you can view and configure. You can use the &lt;/b&gt;&lt;b&gt;kenv&lt;/b&gt;&lt;b&gt; command to view the currently-configured parameters on your system, or the &lt;/b&gt;&lt;b&gt;sysctl -o -a&lt;/b&gt;&lt;b&gt; command to view all available parameters and their default values.  The &lt;/b&gt;&lt;b&gt;sysctl&lt;/b&gt;&lt;b&gt; command can also be used to view specific parameters. For example:&#xD;  &lt;/b&gt;&lt;b&gt;sysctl kern&lt;/b&gt;&lt;b&gt;      (shows all parameters starting with kern)&#xD;  &lt;/b&gt;&lt;b&gt;sysctl kern.securelevel&lt;/b&gt;&lt;b&gt;      (shows current value of the kernel security level)&#xD;  &lt;/b&gt;&lt;b&gt;sysctl hw.model&lt;/b&gt;&lt;b&gt;      (shows your CPU model)&#xD;&#xD;To set a kernel parameter at boot time, add the appropriate line to the &lt;/b&gt;&lt;b&gt;/etc/sysctl.conf&lt;/b&gt;&lt;b&gt; file. &#xD;&#xD;&lt;/b&gt;&lt;b&gt;3. System initialization&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Just like the GRUB2 boot loader on Linux, FreeBSD has an interactive boot loader called &lt;/b&gt;&lt;b&gt;boot0&lt;/b&gt;&lt;b&gt; that is much more user friendly. It displays a menu for 10 seconds by default that allows you to enter rescue mode or modify kernel values manually, among other things. If you are repairing a system, a copy of useful binary programs is stored &lt;/b&gt;&lt;b&gt;under&lt;/b&gt;&lt;b&gt; the &lt;/b&gt;&lt;b&gt;/rescue/&lt;/b&gt;&lt;b&gt; &lt;/b&gt;&lt;b&gt;directory and made available to boot0.&#xD;&#xD;Once the kernel is loaded by boot0, the &lt;/b&gt;&lt;b&gt;init&lt;/b&gt;&lt;b&gt; daemon parses the large &lt;/b&gt;&lt;b&gt;/etc/rc&lt;/b&gt;&lt;b&gt; script to start the other daemons that you specified within /etc/rc.conf by executing the appropriate daemon scripts under the&lt;/b&gt;&lt;b&gt; &lt;/b&gt;&lt;b&gt;/etc/rc.d/&lt;/b&gt;&lt;b&gt; dire&lt;/b&gt;&lt;b&gt;ctory. There also are other scripts executed by init at boot time. For example, &lt;/b&gt;&lt;b&gt;/etc/netstart &lt;/b&gt;&lt;b&gt;configures the network according to the parameters you specified in /etc/rc.conf.&#xD;&#xD;After your system has booted, you can view the &lt;/b&gt;&lt;b&gt;/var/run/dmesg.boot&lt;/b&gt;&lt;b&gt; file to see the hardware detected and modules loaded by your kernel, or view the &lt;/b&gt;&lt;b&gt;/var/log/messages&lt;/b&gt;&lt;b&gt; file to view the daemons and components that were started by init (including any errors).&#xD;&#xD;&lt;/b&gt;&lt;b&gt;4. Storage configuration&#xD;&lt;/b&gt;&lt;b&gt;&#xD;FreeBSD uses different device files for storage as well as different methods for partitioning and creating filesystems. To see a list of the physical storage devices you have, you can use the following two commands:&#xD;  &lt;/b&gt;&lt;b&gt;camcontrol devlist&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;geom disk list&lt;/b&gt;&lt;b&gt;&#xD;&#xD;Some sample device files for these storage devices include:&#xD;  &lt;/b&gt;&lt;b&gt;/dev/cd0&lt;/b&gt;&lt;b&gt;      (first CD/DVD)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/da0&lt;/b&gt;&lt;b&gt;      (first SCSI/SAS disk or USB drive, which emulates SCSI)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0&lt;/b&gt;&lt;b&gt;      (first IDE/SATA disk)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/nvme0&lt;/b&gt;&lt;b&gt;      (first NVMe SSD)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/nvme0ns1&lt;/b&gt;&lt;b&gt;      (first namespace on the first NVMe SSD)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Say, for example, you have one SATA SSD in your system that has a &lt;/b&gt;&lt;b&gt;GPT partition table&lt;/b&gt;&lt;b&gt;. FreeBSD will likely create three &lt;/b&gt;&lt;b&gt;partitions&lt;/b&gt;&lt;b&gt; on it during the installation:&#xD;  &lt;/b&gt;&lt;b&gt;/dev/ada0p1&lt;/b&gt;&lt;b&gt;      (usually a 512KB FreeBSD boot partition or UEFI boot partition)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0p2&lt;/b&gt;&lt;b&gt;      (usually a swap partition)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0p3&lt;/b&gt;&lt;b&gt;      (rest of disk - usually given to ZFS, or mounted to / if you use UFS)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;If you have older storage devices that use an &lt;/b&gt;&lt;b&gt;MBR partition table&lt;/b&gt;&lt;b&gt;, each primary partition is called a &lt;/b&gt;&lt;b&gt;slice&lt;/b&gt;&lt;b&gt; in FreeBSD, and further subdivided into up to 7 &lt;/b&gt;&lt;b&gt;device nodes&lt;/b&gt;&lt;b&gt; using a special BSD disk label. For example, the first slice on /dev/ada0 could be subdivided into 4 device nodes, with each one assigned a letter: &lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0s1a&lt;/b&gt;&lt;b&gt;      (first device node in the first slice on ada0)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0s1b&lt;/b&gt;&lt;b&gt;      (second device node in the first slice on ada0)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0s1c&lt;/b&gt;&lt;b&gt;      (third device node in the first slice on ada0)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;/dev/ada0s1d&lt;/b&gt;&lt;b&gt;      (fourth device node in the first slice on ada0)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;You can view your disk configuration using the &lt;/b&gt;&lt;b&gt;gpart &lt;/b&gt;&lt;b&gt;command (which can also create/manage partitions too): &lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;gpart show -p ada0&lt;/b&gt;&lt;b&gt;      (shows partitions on ada0)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;gpart show -l ada0&lt;/b&gt;&lt;b&gt;      (shows labels on ada0, which match files under /dev/gpt/)&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;If you just want to se the partition labels for disks on the system, you could instead run the &lt;/b&gt;&lt;b&gt;glabel list&lt;/b&gt;&lt;b&gt; command.&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;5. Filesystem configuration&#xD;&lt;/b&gt;&lt;b&gt;&#xD;The only two filesystems that are commonly used on FreeBSD for storage are &lt;/b&gt;&lt;b&gt;UFS&lt;/b&gt;&lt;b&gt; (which is ancient and should only be used if you have serious mental health issues), and &lt;/b&gt;&lt;b&gt;ZFS&lt;/b&gt;&lt;b&gt; (which is amazing, and commonly configured on production Linux servers).&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;After creating partitions on a GPT disk (or slices and device nodes on an MBR disk), you can use the following commands create and work with UFS filesystems: &lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;newfs&lt;/b&gt;&lt;b&gt;      (creates a UFS filesystem)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;growfs&lt;/b&gt;&lt;b&gt;      (extends the size of a UFS filesystem)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;tunefs&lt;/b&gt;&lt;b&gt;      (tunes UFS filesystem parameters)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;mksnap_ffs&lt;/b&gt;&lt;b&gt;      (creates a UFS filesystem snapshot)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;fsck&lt;/b&gt;&lt;b&gt;      (checks a UFS filesystem for errors)&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;Normally, you&#x2019;d use ZFS instead of UFS on a FreeBSD system as it has superior enterprise features, including corruption protection and device fault tolerance. The same &lt;/b&gt;&lt;b&gt;zpool&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;zfs&lt;/b&gt;&lt;b&gt; commands you used on Linux to configure ZFS can also be used on FreeBSD. For example, to create a RAID-Z1 dataset called lala from the space on 3 different SCSI disks and put a ZFS filesystem on it, you could use the following command: &lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;zpool create lala raidz /dev/da1p1 /dev/da2p1 /dev/da3p1 &lt;/b&gt;&lt;b&gt;      &#xD;&#xD;Some other sample &lt;/b&gt;&lt;b&gt;zpool&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;zfs&lt;/b&gt;&lt;b&gt; commands include:&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;zpool status lala&lt;/b&gt;&lt;b&gt;      (view status of the lala dataset)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;zpool list&lt;/b&gt;&lt;b&gt;      (lists all ZFS datasets)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;zpool get free&lt;/b&gt;&lt;b&gt;      (displays free space information from all ZFS datasets)&#xD;&#xD;  &lt;/b&gt;&lt;b&gt;zfs create lala/stuff&lt;/b&gt;&lt;b&gt;      (creates another ZFS dataset under the lala dataset)&#xD;  &lt;/b&gt;&lt;b&gt;zfs list&lt;/b&gt;&lt;b&gt;      (displays all ZFS datasets and where they are mounted)&#xD;  &lt;/b&gt;&lt;b&gt;zfs get compression &lt;/b&gt;&lt;b&gt;     (displays compression setting for all ZFS datasets)&#xD;  &lt;/b&gt;&lt;b&gt;zfs set compression=lz4 lala/stuff&lt;/b&gt;&lt;b&gt;     (enables compression for lala/stuff)&#xD;&#xD;When you run the &lt;/b&gt;&lt;b&gt;zfs list&lt;/b&gt;&lt;b&gt; command on a newly-installed system, you&#x2019;ll see that there is one ZFS dataset called &lt;/b&gt;&lt;b&gt;zroot&lt;/b&gt;&lt;b&gt; that is created by the FreeBSD installer. This dataset contains many other datasets underneath it for different system directories:&#xD;  &lt;/b&gt;&lt;b&gt;zroot/ROOT/default&lt;/b&gt;&lt;b&gt; is mounted to /&#xD;  &lt;/b&gt;&lt;b&gt;zroot/usr&lt;/b&gt;&lt;b&gt; is mounted to /usr&#xD;  &lt;/b&gt;&lt;b&gt;zroot/usr/home&lt;/b&gt;&lt;b&gt; is mounted to /usr/home&#xD;  &lt;/b&gt;&lt;b&gt;zroot/var&lt;/b&gt;&lt;b&gt; is mounted to /var&#xD;and so on. &#xD;&#xD;What you may find odd is that &lt;/b&gt;&lt;b&gt;zroot/ROOT/default&lt;/b&gt;&lt;b&gt; is mounted to the root of the system. This is because FreeBSD supports different&lt;/b&gt;&lt;b&gt; boot environments&lt;/b&gt;&lt;b&gt; if you take ZFS snapshots of the / filesystem. Before performing a risky configuration, you could take a snapshot of your system called &lt;/b&gt;&lt;b&gt;zroot/ROOT/May2&lt;/b&gt;&lt;b&gt; and then revert to it if your risky configuration fails! You can even choose your a previous boot environment at the FreeBSD boot loader menu when you boot the system. Here are some useful boot environment commands:&#xD;  &lt;/b&gt;&lt;b&gt;pkg install beadm&lt;/b&gt;&lt;b&gt;      (installs the boot environment package - &lt;/b&gt;&lt;b&gt;pkg&lt;/b&gt;&lt;b&gt; is discussed later)&#xD;  &lt;/b&gt;&lt;b&gt;beadm create May2&lt;/b&gt;&lt;b&gt;      (create snapshot of system called May2)&#xD;  &lt;/b&gt;&lt;b&gt;zfs list &lt;/b&gt;&lt;b&gt;     (you should see &lt;/b&gt;&lt;b&gt;zroot/ROOT/default&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;zroot/ROOT/May2&lt;/b&gt;&lt;b&gt;)&#xD;  &lt;/b&gt;&lt;b&gt;beadm activate May2 &amp;&amp; reboot&lt;/b&gt;&lt;b&gt;      (reverts system to May2 snapshot) &#xD;&#xD;There is also a /&lt;/b&gt;&lt;b&gt;etc/fstab&lt;/b&gt;&lt;b&gt; file that mounts non-ZFS filesystems at boot just as you&#x2019;d expect on a Linux system. If you use ZFS exclusively, /etc/fstab just activates the swap partition only. And just as Linux has udev rules for restricting access to storage devices, you can add lines to &lt;/b&gt;&lt;b&gt;/etc/devfs.conf&lt;/b&gt;&lt;b&gt; or &lt;/b&gt;&lt;b&gt;/etc/devfs.rules&lt;/b&gt;&lt;b&gt; to do this on FreeBSD.&#xD;&#xD;The only other glaring difference between Linux and FreeBSD when it comes to the filesystem is the use of filesystem attributes. On Linux systems, you could set filesystem attributes using the &lt;/b&gt;&lt;b&gt;chattr&lt;/b&gt;&lt;b&gt; command, and list them with the &lt;/b&gt;&lt;b&gt;lsattr&lt;/b&gt;&lt;b&gt; command. However, FreeBSD uses a different set of attributes called &lt;/b&gt;&lt;b&gt;filesystem flags&lt;/b&gt;&lt;b&gt; that can be set at the system or user level:&#xD;  &lt;/b&gt;&lt;b&gt;chflags sunlink file&lt;/b&gt;&lt;b&gt;      (sets the system unlink flag on a file, to prevent file deletion)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;chkflags nosunlink file&lt;/b&gt;&lt;b&gt;      (unsets the system unlink flag on a file)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;ls -lo file&lt;/b&gt;&lt;b&gt;      (displays flags on a file)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;6. Users and groups&#xD;&lt;/b&gt;&lt;b&gt;&#xD;As on Linux systems, FreeBSD stores user configuration in &lt;/b&gt;&lt;b&gt;/etc/passwd&lt;/b&gt;&lt;b&gt; (readable by everyone), but converts it to a /etc/pwd.db database for fast system access. However, instead of using the /etc/shadow file like Linux does, FreeBSD stores all user and password configuration in &lt;/b&gt;&lt;b&gt;/etc/master.passwd&lt;/b&gt;&lt;b&gt; (readable by root only) and converts it to /etc/spwd.db for fast system access. Groups are stored in &lt;/b&gt;&lt;b&gt;/etc/group&lt;/b&gt;&lt;b&gt; as you&#x2019;d expect, but there is there is no &lt;/b&gt;&lt;b&gt;sudo&lt;/b&gt;&lt;b&gt; functionality - instead, you must be part of the &lt;/b&gt;&lt;b&gt;wheel&lt;/b&gt;&lt;b&gt; (big wheel) group to use the &lt;/b&gt;&lt;b&gt;su&lt;/b&gt;&lt;b&gt; command to run commands as root or obtain a root shell. &#xD;&#xD;Default home directory files for new users are copied from &lt;/b&gt;&lt;b&gt;/usr/share/skel/&lt;/b&gt;&lt;b&gt;. You can also create rules to allow or prevent user access in the &lt;/b&gt;&lt;b&gt;/etc/login.access&lt;/b&gt;&lt;b&gt; file, as well as define user classes for accessing system resources in the &lt;/b&gt;&lt;b&gt;/etc/login.conf&lt;/b&gt;&lt;b&gt; file. &#xD;&#xD;Common commands to create and manage users include:&#xD;  &lt;/b&gt;&lt;b&gt;adduser&lt;/b&gt;&lt;b&gt;      (creates a user - defaults values are taken from &lt;/b&gt;&lt;b&gt;/etc/adduser.conf&lt;/b&gt;&lt;b&gt;)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;adduser -C&lt;/b&gt;&lt;b&gt;      (creates the /etc/adduser.conf file with values you specify)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;rmuser&lt;/b&gt;&lt;b&gt;      (removes a user)&#xD;  &lt;/b&gt;&lt;b&gt;pw useradd/userdel/usermod/lock/unlock&lt;/b&gt;&lt;b&gt;      (creates &amp; manages users)&#xD;  &lt;/b&gt;&lt;b&gt;chpass&lt;/b&gt;&lt;b&gt;      (modifies settings for a user using the vi editor)&#xD;  &lt;/b&gt;&lt;b&gt;vipw&lt;/b&gt;&lt;b&gt;      (edits /etc/master.passwd using vi, and then rebuilds /etc/spwd.db)&#xD;&#xD;&lt;/b&gt;&lt;b&gt;7. Packages, services and monitoring&#xD;&lt;/b&gt;&lt;b&gt;&#xD;Installing and managing packages on FreeBSD is just as easy as using the Red Hat or Debian package managers on a Linux system. Instead of &lt;/b&gt;&lt;b&gt;dnf&lt;/b&gt;&lt;b&gt; or &lt;/b&gt;&lt;b&gt;apt&lt;/b&gt;&lt;b&gt;, you use the &lt;/b&gt;&lt;b&gt;pkg&lt;/b&gt;&lt;b&gt; command: &#xD;  &lt;/b&gt;&lt;b&gt;pkg update&lt;/b&gt;&lt;b&gt;      (updates package list from online repository)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg search bash&lt;/b&gt;&lt;b&gt;      (searches online repository for bash packages)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg install bash&lt;/b&gt;&lt;b&gt;      (installs bash package from online repository)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg upgrade bash&lt;/b&gt;&lt;b&gt;      (upgrades bash to latest version)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg info bash&lt;/b&gt;&lt;b&gt;      (displays package details)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg info -l bash&lt;/b&gt;&lt;b&gt;      (displays package file contents)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg check bash&lt;/b&gt;&lt;b&gt;      (checks bash package content for missing/corrupted files)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg lock bash&lt;/b&gt;&lt;b&gt;      (prevents modification or removal of package)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg remove bash&lt;/b&gt;&lt;b&gt;      (removes bash package)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg clean&lt;/b&gt;&lt;b&gt;      (cleans up files in the package repository, /var/cache/pkg/)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg autoremove&lt;/b&gt;&lt;b&gt;      (auto removes unneeded dependency packages)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg which /usr/local/bin/bash&lt;/b&gt;&lt;b&gt;      (displays package the bash file belongs to)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;freebsd-update fetch&lt;/b&gt;&lt;b&gt;      (downloads latest version of FreeBSD)&lt;/b&gt;&lt;b&gt; &#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;freebsd-update install&lt;/b&gt;&lt;b&gt;      (installs latest version of FreeBSD - reboot after)&#xD;&#xD;After installing a daemon package, you must also configure it to start at boot time by adding a line to the /etc/rc.conf file. For example, after installing the apache24 package (for the Apache Web server daemon), you could start it at boot time by adding the following line to /etc/rc.conf:&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;apache24_enable=&#x201D;YES&#x201D;&lt;/b&gt;&lt;b&gt;      (yes, it&#x2019;s that easy)&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;The configuration files for any daemons that you install are under /etc or /usr/local/etc. For example, you&#x2019;ll find the httpd.conf configuration file for Apache in the /usr/local/etc/apache24/ directory on FreeBSD.&#xD;&#xD;You can also manage daemons using the same &lt;/b&gt;&lt;b&gt;service&lt;/b&gt;&lt;b&gt; command used in Linux systems prior to Systemd:&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;service -e&lt;/b&gt;&lt;b&gt;      (displays daemons that are enabled and order they are started at boot)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;service sshd stop/start/restart&lt;/b&gt;&lt;b&gt;      (stops/starts/restarts the sshd daemon)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;service sshd onestart&lt;/b&gt;&lt;b&gt;      (starts the sshd daemon if it is not listed in /etc/rc.conf)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;service sshd extracommands&lt;/b&gt;&lt;b&gt;      (displays additional options for working with sshd)&#xD;&#xD;Of course, loading additional daemons will impact the performance of your system, especially as the number of clients connecting to them increases. You can monitor the performance of your FreeBSD system using the same &lt;/b&gt;&lt;b&gt;vmstat&lt;/b&gt;&lt;b&gt; and &lt;/b&gt;&lt;b&gt;top&lt;/b&gt;&lt;b&gt; commands you&#x2019;re used to in Linux (the FreeBSD &lt;/b&gt;&lt;b&gt;top&lt;/b&gt;&lt;b&gt; command also lists ZFS performance statistics), as well as monitor disk performance using the &lt;/b&gt;&lt;b&gt;gstat&lt;/b&gt;&lt;b&gt; command.&#xD;&#xD;Similarly, you can use a plethora of different network commands in FreeBSD to monitor network statistics. Here are some of my favourites:&#xD;  &lt;/b&gt;&lt;b&gt;netstat -w 1 -d&lt;/b&gt;&lt;b&gt;      (displays packet stats every 1 second)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;netstat -na -f inet&lt;/b&gt;&lt;b&gt;      (displays active IPv4 connections)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;netstat -na -f inet6&lt;/b&gt;&lt;b&gt;      (displays active IPv6 connections)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;netstat -m&lt;/b&gt;&lt;b&gt;      (displays tunable memory buffer information for IP stack)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;sockstat -4&lt;/b&gt;&lt;b&gt;      (displays IPv4 sockets)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;sockstat -6 &lt;/b&gt;&lt;b&gt;     (displays IPv6 sockets)&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;8. Other stuff&#xD;&lt;/b&gt;&lt;b&gt;&#xD;The previous 7 sections outlined the main areas of FreeBSD that most Linux admins will want to know. In this final section, I&#x2019;ll list some extra stuff (in no particular order).&#xD;&#xD;Compiling software from source is very easy in FreeBSD. You can run the &lt;/b&gt;&lt;b&gt;portsnap auto &lt;/b&gt;&lt;b&gt;command to download the source code for the ready-to-compile ports tree from the FreeBSD repository to the &lt;/b&gt;&lt;b&gt;/usr/ports/&lt;/b&gt;&lt;b&gt; directory and then use the appropriate &lt;/b&gt;&lt;b&gt;make&lt;/b&gt;&lt;b&gt; commands to compile and install it on your system.&#xD;&#xD;If you want to configure a firewall, there are three firewall systems to choose from (if you view the FreeBSD handbook), but the most common one is &lt;/b&gt;&lt;b&gt;PF&lt;/b&gt;&lt;b&gt; from OpenBSD. You place your rules in &lt;/b&gt;&lt;b&gt;/etc/pf.conf &lt;/b&gt;&lt;b&gt;and use the &lt;/b&gt;&lt;b&gt;pfctl&lt;/b&gt;&lt;b&gt; command to control the firewall. You can also use &lt;/b&gt;&lt;b&gt;blacklistd&lt;/b&gt;&lt;b&gt; to block undesired connections (or too many connections). You can use &lt;/b&gt;&lt;b&gt;blacklistctl&lt;/b&gt;&lt;b&gt; to control blacklistd, as well as list connection rules in&lt;/b&gt;&lt;b&gt; /etc/blacklistd.conf&lt;/b&gt;&lt;b&gt;.&lt;/b&gt;&lt;b&gt;&#xD;&#xD;&lt;/b&gt;&lt;b&gt;FreeBSD jails&lt;/b&gt;&lt;b&gt; are one of the earliest examples of OS virtualization/containerization. To create a FreeBSD jail, you download a userland (filesystem) tarball from the FreeBSD repository and extract it to a directory of your choice (e.g. /jails/container1). Next, you add a paragraph to the &lt;/b&gt;&lt;b&gt;/etc/jail.conf&lt;/b&gt;&lt;b&gt; file that configures the jail parameters (e.g. IP address, etc.). Finally, you can start and manage your jail using a wide variety of different commands, including:&#xD;  &lt;/b&gt;&lt;b&gt;service jail start container1&lt;/b&gt;&lt;b&gt;      (starts the container1 jail)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;service jail stop container1&lt;/b&gt;&lt;b&gt;      (stops the container1 jail)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;jls&lt;/b&gt;&lt;b&gt;      (views all jails running on the system)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;jexec container1 command&lt;/b&gt;&lt;b&gt;      (executes a command in the container1 jail)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;  &lt;/b&gt;&lt;b&gt;pkg -j container1 install apache24 &lt;/b&gt;&lt;b&gt;     (installs Apache in the container1 jail)&lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;If you start the NFSv4 file sharing daemons (installed by default) by adding the appropriate entries to /etc/rc.conf, you can add lines to &lt;/b&gt;&lt;b&gt;/etc/exports&lt;/b&gt;&lt;b&gt; to share out directories on your system. However, you can instead use ZFS to share datasets using NFSv4. These datasets are listed in &lt;/b&gt;&lt;b&gt;/etc/zfs/exports&lt;/b&gt;&lt;b&gt;. For example, to share out the /usr/home directory using NFS, you could use the following command:&#xD;  &lt;/b&gt;&lt;b&gt;zfs set sharenfs=on zroot/usr/home &lt;/b&gt;&lt;b&gt;     &lt;/b&gt;&lt;b&gt;&#xD;&lt;/b&gt;&lt;b&gt;&#xD;If you&#x2019;ve been a Linux or UNIX administrator for a long time, you&#x2019;ll likely run into things on FreeBSD that remind you of days gone by. For example, you can still start daemons on demand using &lt;/b&gt;&lt;b&gt;inetd&lt;/b&gt;&lt;b&gt; and entries within &lt;/b&gt;&lt;b&gt;/etc/inetd.conf&lt;/b&gt;&lt;b&gt;, or use the old LPD printing system by adding printer entries to &lt;/b&gt;&lt;b&gt;/etc/printcap&lt;/b&gt;&lt;b&gt; (please install and use CUPS instead....seriously). FreeBSD also uses the old &lt;/b&gt;&lt;b&gt;syslogd&lt;/b&gt;&lt;b&gt; to log system events using the entries in &lt;/b&gt;&lt;b&gt;/etc/syslog.conf&lt;/b&gt;&lt;b&gt; (it works well so why change it, right?). However, instead of logrotate, FreeBSD uses &lt;/b&gt;&lt;b&gt;newsyslog&lt;/b&gt;&lt;b&gt; to rotate log files according to rules in &lt;/b&gt;&lt;b&gt;/etc/newsyslog.conf&lt;/b&gt;&lt;b&gt;.&#xD;&#xD;And yes, if you want to use FreeBSD as a workstation, you can install X.org and GNOME. But given that Linux is leading the charge in that area, it&#x2019;d be wiser to use Linux as your workstation, and leverage FreeBSD as a wicked fast server.&lt;/b&gt;</richText>
  </textBox>
  <image id="generic-picture-attributes" dynamic="no" visible="yes" src="2_FreeBSD_UNIX_for_Linux_sysadmins_files/shapeimage_1.png" left="0px" top="0px" width="700px" height="400px"/>
</content>
