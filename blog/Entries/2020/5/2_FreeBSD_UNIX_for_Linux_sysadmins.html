<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20200628" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>FreeBSD UNIX for Linux sysadmins</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="2_FreeBSD_UNIX_for_Linux_sysadmins_files/2_FreeBSD_UNIX_for_Linux_sysadmins.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='2_FreeBSD_UNIX_for_Linux_sysadmins_files/2_FreeBSD_UNIX_for_Linux_sysadminsIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'blog.html';
iWebBlogMainPageTitle = 'blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="2_FreeBSD_UNIX_for_Linux_sysadmins_files/2_FreeBSD_UNIX_for_Linux_sysadmins.js"></script>
  </head>
  <body style="background: rgb(247, 246, 246); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(247, 246, 246); text-align: left; width: 700px; " id="body_content">
        <div style="float: left; height: 0px; line-height: 0px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 24px; opacity: 1.00; position: relative; width: 700px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .85em;\n\tcolor: #999;\n\tmargin: 0px;\n\tline-height: 20px;\n\tfont-weight: bold;\n}\n\n.navbar-bg {\n\ttext-align: left;\n\tpadding: 0px;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 15px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #999;\n}\n\nli a:hover\n{\n \tcolor: #F00;\n\ttext-decoration: none;\n}\n\n\nli.current-page a\n{\n\t color: #666;\n\ttext-decoration: none;\n\n}", "current-page-GUID": "3F9CBE75-F5BD-4B35-9E50-35A3B3B60A4E", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 416px; width: 620px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_620_41" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Title"><span class="Color">FreeBSD UNIX for Linux sysadmins</span></p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Title"></div>
          </div>
          


          <div id="id2" style="visibility: hidden;  height: 41px; left: 40px; position: absolute; top: 448px; width: 620px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_620_41" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">Saturday, May 2, 2020</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 40px; margin-top: 488px; position: relative; width: 620px; z-index: 1; " class="style_SkipStroke_2 shape-with-text flowDefining">
            <div class="text-content style_External_620_6857" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="Body">If you’ve ever installed and explored another Linux distro (what Linux sysadmin hasn’t?!?), then exploring FreeBSD is going be somewhat similar with a few key differences. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">While there is no graphical installation, the installation process is straightforward and similar to installing a server-based Linux distro. Just make sure you choose the <span class="style_1">local_unbound</span> package when prompted if you want to cache DNS lookups locally, as FreeBSD doesn’t have a built-in local DNS resolver that does this.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Following installation, the directory structure is almost identical to Linux. Of course, you’ll notice some small differences here and there (e.g. regular user home directories are located under /usr/home instead of /home). Standard UNIX commands such as <span class="style_2">ls</span>, <span class="style_2">chmod</span>, <span class="style_2">find</span>, <span class="style_2">which</span>, <span class="style_2">ps</span>, <span class="style_2">nice</span>, <span class="style_2">ifconfig</span>, <span class="style_2">netstat</span>, <span class="style_2">sockstat</span> (the <span class="style_2">ss</span> command in Linux) are exactly as you’d expect, but with some different options here and there that you’ll see in the <span class="style_2">man</span> pages. And yes, <span class="style_2">reboot</span> and <span class="style_2">poweroff</span> are there too.<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">Why FreeBSD?<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The main benefit FreeBSD has over Linux is <span class="style_1">speed</span>. You thought Linux was fast? Try FreeBSD. It has the fastest IP stack of any operating system by a long shot. Since it’s UNIX and you can provide the same services (e.g. Samba, Apache, NFS, Nginx), this means you can provide them faster and leaner.  <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">FreeBSD has also kept to its <span class="style_1">KISS (Keep It Simple Stupid)</span> UNIX roots without compromising features, while Linux configuration gets more and more complex as time goes on. Want to start a service at boot time? You just add a line that says <span class="style_2">servicename=”YES”</span> to a small text file (described later). And this small text file stores 90% of your system configuration, including your IP settings. In short, configuring a FreeBSD system is both fun and addictive.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">While configuring FreeBSD is easy, it’s also incredibly powerful. There are granular security features and system configuration/recovery features in FreeBSD that you won’t find in other operating systems. For those who want to go down that rabbit hole, it’s well worth your time! And, of course, native support for ZFS (the most advanced filesystem on the planet) is a big plus. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">In the following sections, I’ll describe some key differences and features of FreeBSD that you’ll want to know coming from a Linux sysadmin background. Of course, I’m assuming that you already know the associated topics in Linux before reading these sections! Key filenames and components are in <span class="style_1">red</span>, while commands and configuration parameters are in <span class="style_2">code font</span>.<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">1. System configuration<br /></p>
                <p class="Body"><br /></p>
                <p class="Body"><span class="style_1">/etc/rc.conf </span>contains nearly all system configuration, including IP configuration, hostname, default GW, services (daemons) that should start at boot time, and so on. Lines within this file have <span class="style_3">parameter</span><span class="style_2">=</span><span class="style_3">value</span> syntax and are easy to edit using a text editor, such as <span class="style_2">vi</span>. You can also  use the <span class="style_2">sysrc -a</span> command to show all of the configured values in /etc/rc.conf, or the <span class="style_2">sysrc </span><span class="style_3">parameter</span><span class="style_2">=</span><span class="style_3">value</span> to modify or add configuration.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">FreeBSD stores the default parameters for configuration files in a defaults subdirectory. For example, <span class="style_1">/etc/defaults/rc.conf</span> stores a large number of system-configured defaults that are overridden by /etc/rc.conf. Never change the entries in /etc/defaults/rc.conf - instead, just override them by adding the same lines to /etc/rc.conf with the values you want. There’s also a /<span class="style_1">etc/rc.conf.d/</span> directory that software packages can add files to that set system parameters (it’s empty on a default installation of FreeBSD).<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">2. Boot loader and kernel configuration<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Boot loader configuration is stored in <span class="style_1">/boot/loader.conf </span>(and <span class="style_1">/boot/defaults/loader.conf</span>), and uses the same syntax as /etc/rc.conf.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">To view modules inserted into the kernel, you can use <span class="style_2">kldstat</span>. You can also load and unload modules manually. For example:<br /></p>
                <p class="Body">  <span class="style_2">kldload linprocfs.ko</span>      (loads the Linux procfs filesystem module) <br /></p>
                <p class="Body">  <span class="style_2">kldunload linprocfs.ko</span>      (unloads the same module)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">To make sure this module gets loaded automatically each time you boot, you could add the following line to the /boot/loader.conf file: <br /></p>
                <p class="Body">  <span class="style_2">[cmd=]kldload /boot/kernel/linprocfs.ko[/cmd]</span><br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The FreeBSD kernel also has many properties and parameters that you can view and configure. You can use the <span class="style_2">kenv</span> command to view the currently-configured parameters on your system, or the <span class="style_2">sysctl -o -a</span> command to view all available parameters and their default values.  The <span class="style_2">sysctl</span> command can also be used to view specific parameters. For example:<br /></p>
                <p class="Body">  <span class="style_2">sysctl kern</span>      (shows all parameters starting with kern)<br /></p>
                <p class="Body">  <span class="style_2">sysctl kern.securelevel</span>      (shows current value of the kernel security level)<br /></p>
                <p class="Body">  <span class="style_2">sysctl hw.model</span>      (shows your CPU model)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">To set a kernel parameter at boot time, add the appropriate line to the <span class="style_1">/etc/sysctl.conf</span> file. <br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">3. System initialization<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Just like the GRUB2 boot loader on Linux, FreeBSD has an interactive boot loader called <span class="style_1">boot0</span> that is much more user friendly. It displays a menu for 10 seconds by default that allows you to enter rescue mode or modify kernel values manually, among other things. If you are repairing a system, a copy of useful binary programs is stored <span class="style_4">under</span> the <span class="style_1">/rescue/</span><span class="style_4"> </span>directory and made available to boot0.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Once the kernel is loaded by boot0, the <span class="style_1">init</span> daemon parses the large <span class="style_1">/etc/rc</span> script to start the other daemons that you specified within /etc/rc.conf by executing the appropriate daemon scripts under the<span class="style_4"> </span><span class="style_1">/etc/rc.d/</span><span class="style_4"> dire</span>ctory. There also are other scripts executed by init at boot time. For example, <span class="style_1">/etc/netstart </span>configures the network according to the parameters you specified in /etc/rc.conf.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">After your system has booted, you can view the <span class="style_1">/var/run/dmesg.boot</span> file to see the hardware detected and modules loaded by your kernel, or view the <span class="style_1">/var/log/messages</span> file to view the daemons and components that were started by init (including any errors).<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">4. Storage configuration<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">FreeBSD uses different device files for storage as well as different methods for partitioning and creating filesystems. To see a list of the physical storage devices you have, you can use the following two commands:<br /></p>
                <p class="Body">  <span class="style_2">camcontrol devlist<br /></span></p>
                <p class="Body">  <span class="style_2">geom disk list</span><br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Some sample device files for these storage devices include:<br /></p>
                <p class="Body">  <span class="style_2">/dev/cd0</span>      (first CD/DVD)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/da0</span>      (first SCSI/SAS disk or USB drive, which emulates SCSI)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0</span>      (first IDE/SATA disk)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/nvme0</span>      (first NVMe SSD)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/nvme0ns1</span>      (first namespace on the first NVMe SSD)<span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="Body">Say, for example, you have one SATA SSD in your system that has a <span class="style_1">GPT partition table</span>. FreeBSD will likely create three <span class="style_1">partitions</span> on it during the installation:<br /></p>
                <p class="Body">  <span class="style_2">/dev/ada0p1</span>      (usually a 512KB FreeBSD boot partition or UEFI boot partition)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0p2</span>      (usually a swap partition)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0p3</span>      (rest of disk - usually given to ZFS, or mounted to / if you use UFS)<span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="Body">If you have older storage devices that use an <span class="style_1">MBR partition table</span>, each primary partition is called a <span class="style_1">slice</span> in FreeBSD, and further subdivided into up to 7 <span class="style_1">device nodes</span> using a special BSD disk label. For example, the first slice on /dev/ada0 could be subdivided into 4 device nodes, with each one assigned a letter: <span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0s1a</span>      (first device node in the first slice on ada0)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0s1b</span>      (second device node in the first slice on ada0)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0s1c</span>      (third device node in the first slice on ada0)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">/dev/ada0s1d</span>      (fourth device node in the first slice on ada0)<span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="Body">You can view your disk configuration using the <span class="style_2">gpart </span>command (which can also create/manage partitions too): <span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">gpart show -p ada0</span>      (shows partitions on ada0)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">gpart show -l ada0</span>      (shows labels on ada0, which match files under /dev/gpt/)<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="Body">If you just want to se the partition labels for disks on the system, you could instead run the <span class="style_2">glabel list</span> command.<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="paragraph_style">5. Filesystem configuration<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The only two filesystems that are commonly used on FreeBSD for storage are <span class="style_1">UFS</span> (which is ancient and should only be used if you have serious mental health issues), and <span class="style_1">ZFS</span> (which is amazing, and commonly configured on production Linux servers).<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="Body">After creating partitions on a GPT disk (or slices and device nodes on an MBR disk), you can use the following commands create and work with UFS filesystems: <span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">newfs</span>      (creates a UFS filesystem)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">growfs</span>      (extends the size of a UFS filesystem)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">tunefs</span>      (tunes UFS filesystem parameters)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">mksnap_ffs</span>      (creates a UFS filesystem snapshot)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">fsck</span>      (checks a UFS filesystem for errors)<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="Body">Normally, you’d use ZFS instead of UFS on a FreeBSD system as it has superior enterprise features, including corruption protection and device fault tolerance. The same <span class="style_2">zpool</span> and <span class="style_2">zfs</span> commands you used on Linux to configure ZFS can also be used on FreeBSD. For example, to create a RAID-Z1 dataset called lala from the space on 3 different SCSI disks and put a ZFS filesystem on it, you could use the following command: <span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">zpool create lala raidz /dev/da1p1 /dev/da2p1 /dev/da3p1 </span>      <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Some other sample <span class="style_2">zpool</span> and <span class="style_2">zfs</span> commands include:<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">zpool status lala</span>      (view status of the lala dataset)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">zpool list</span>      (lists all ZFS datasets)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">zpool get free</span>      (displays free space information from all ZFS datasets)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">  <span class="style_2">zfs create lala/stuff</span>      (creates another ZFS dataset under the lala dataset)<br /></p>
                <p class="Body">  <span class="style_2">zfs list</span>      (displays all ZFS datasets and where they are mounted)<br /></p>
                <p class="Body">  <span class="style_2">zfs get compression </span>     (displays compression setting for all ZFS datasets)<br /></p>
                <p class="Body">  <span class="style_2">zfs set compression=lz4 lala/stuff</span>     (enables compression for lala/stuff)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">When you run the <span class="style_2">zfs list</span> command on a newly-installed system, you’ll see that there is one ZFS dataset called <span class="style_2">zroot</span> that is created by the FreeBSD installer. This dataset contains many other datasets underneath it for different system directories:<br /></p>
                <p class="Body">  <span class="style_2">zroot/ROOT/default</span> is mounted to /<br /></p>
                <p class="Body">  <span class="style_2">zroot/usr</span> is mounted to /usr<br /></p>
                <p class="Body">  <span class="style_2">zroot/usr/home</span> is mounted to /usr/home<br /></p>
                <p class="Body">  <span class="style_2">zroot/var</span> is mounted to /var<br /></p>
                <p class="Body">and so on. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">What you may find odd is that <span class="style_2">zroot/ROOT/default</span> is mounted to the root of the system. This is because FreeBSD supports different<span class="style_1"> boot environments</span> if you take ZFS snapshots of the / filesystem. Before performing a risky configuration, you could take a snapshot of your system called <span class="style_2">zroot/ROOT/May2</span> and then revert to it if your risky configuration fails! You can even choose your a previous boot environment at the FreeBSD boot loader menu when you boot the system. Here are some useful boot environment commands:<br /></p>
                <p class="Body">  <span class="style_2">pkg install beadm</span>      (installs the boot environment package - <span class="style_2">pkg</span> is discussed later)<br /></p>
                <p class="Body">  <span class="style_2">beadm create May2</span>      (create snapshot of system called May2)<br /></p>
                <p class="Body">  <span class="style_2">zfs list </span>     (you should see <span class="style_2">zroot/ROOT/default</span> and <span class="style_2">zroot/ROOT/May2</span>)<br /></p>
                <p class="Body">  <span class="style_2">beadm activate May2 &amp;&amp; reboot</span>      (reverts system to May2 snapshot) <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">There is also a /<span class="style_1">etc/fstab</span> file that mounts non-ZFS filesystems at boot just as you’d expect on a Linux system. If you use ZFS exclusively, /etc/fstab just activates the swap partition only. And just as Linux has udev rules for restricting access to storage devices, you can add lines to <span class="style_1">/etc/devfs.conf</span> or <span class="style_1">/etc/devfs.rules</span> to do this on FreeBSD.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The only other glaring difference between Linux and FreeBSD when it comes to the filesystem is the use of filesystem attributes. On Linux systems, you could set filesystem attributes using the <span class="style_2">chattr</span> command, and list them with the <span class="style_2">lsattr</span> command. However, FreeBSD uses a different set of attributes called <span class="style_1">filesystem flags</span> that can be set at the system or user level:<br /></p>
                <p class="Body">  <span class="style_2">chflags sunlink file</span>      (sets the system unlink flag on a file, to prevent file deletion)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">chkflags nosunlink file</span>      (unsets the system unlink flag on a file)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">ls -lo file</span>      (displays flags on a file)<span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">6. Users and groups<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">As on Linux systems, FreeBSD stores user configuration in <span class="style_1">/etc/passwd</span> (readable by everyone), but converts it to a /etc/pwd.db database for fast system access. However, instead of using the /etc/shadow file like Linux does, FreeBSD stores all user and password configuration in <span class="style_1">/etc/master.passwd</span> (readable by root only) and converts it to /etc/spwd.db for fast system access. Groups are stored in <span class="style_1">/etc/group</span> as you’d expect, but there is there is no <span class="style_2">sudo</span> functionality - instead, you must be part of the <span class="style_1">wheel</span> (big wheel) group to use the <span class="style_2">su</span> command to run commands as root or obtain a root shell. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Default home directory files for new users are copied from <span class="style_1">/usr/share/skel/</span>. You can also create rules to allow or prevent user access in the <span class="style_1">/etc/login.access</span> file, as well as define user classes for accessing system resources in the <span class="style_1">/etc/login.conf</span> file. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Common commands to create and manage users include:<br /></p>
                <p class="Body">  <span class="style_2">adduser</span>      (creates a user - defaults values are taken from <span class="style_1">/etc/adduser.conf</span>)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">adduser -C</span>      (creates the /etc/adduser.conf file with values you specify)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">rmuser</span>      (removes a user)<br /></p>
                <p class="Body">  <span class="style_2">pw useradd/userdel/usermod/lock/unlock</span>      (creates &amp; manages users)<br /></p>
                <p class="Body">  <span class="style_2">chpass</span>      (modifies settings for a user using the vi editor)<br /></p>
                <p class="Body">  <span class="style_2">vipw</span>      (edits /etc/master.passwd using vi, and then rebuilds /etc/spwd.db)<br /></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style">7. Packages, services and monitoring<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Installing and managing packages on FreeBSD is just as easy as using the Red Hat or Debian package managers on a Linux system. Instead of <span class="style_2">dnf</span> or <span class="style_2">apt</span>, you use the <span class="style_2">pkg</span> command: <br /></p>
                <p class="Body">  <span class="style_2">pkg update</span>      (updates package list from online repository)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg search bash</span>      (searches online repository for bash packages)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg install bash</span>      (installs bash package from online repository)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg upgrade bash</span>      (upgrades bash to latest version)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg info bash</span>      (displays package details)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg info -l bash</span>      (displays package file contents)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg check bash</span>      (checks bash package content for missing/corrupted files)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg lock bash</span>      (prevents modification or removal of package)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg remove bash</span>      (removes bash package)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg clean</span>      (cleans up files in the package repository, /var/cache/pkg/)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg autoremove</span>      (auto removes unneeded dependency packages)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg which /usr/local/bin/bash</span>      (displays package the bash file belongs to)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">freebsd-update fetch</span>      (downloads latest version of FreeBSD)<span class="style_2"> <br /></span></p>
                <p class="Body">  <span class="style_2">freebsd-update install</span>      (installs latest version of FreeBSD - reboot after)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">After installing a daemon package, you must also configure it to start at boot time by adding a line to the /etc/rc.conf file. For example, after installing the apache24 package (for the Apache Web server daemon), you could start it at boot time by adding the following line to /etc/rc.conf:<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">apache24_enable=”YES”</span>      (yes, it’s that easy)<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="Body">The configuration files for any daemons that you install are under /etc or /usr/local/etc. For example, you’ll find the httpd.conf configuration file for Apache in the /usr/local/etc/apache24/ directory on FreeBSD.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">You can also manage daemons using the same <span class="style_2">service</span> command used in Linux systems prior to Systemd:<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">service -e</span>      (displays daemons that are enabled and order they are started at boot)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">service sshd stop/start/restart</span>      (stops/starts/restarts the sshd daemon)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">service sshd onestart</span>      (starts the sshd daemon if it is not listed in /etc/rc.conf)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">service sshd extracommands</span>      (displays additional options for working with sshd)<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Of course, loading additional daemons will impact the performance of your system, especially as the number of clients connecting to them increases. You can monitor the performance of your FreeBSD system using the same <span class="style_2">vmstat</span> and <span class="style_2">top</span> commands you’re used to in Linux (the FreeBSD <span class="style_2">top</span> command also lists ZFS performance statistics), as well as monitor disk performance using the <span class="style_2">gstat</span> command.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Similarly, you can use a plethora of different network commands in FreeBSD to monitor network statistics. Here are some of my favourites:<br /></p>
                <p class="Body">  <span class="style_2">netstat -w 1 -d</span>      (displays packet stats every 1 second)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">netstat -na -f inet</span>      (displays active IPv4 connections)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">netstat -na -f inet6</span>      (displays active IPv6 connections)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">netstat -m</span>      (displays tunable memory buffer information for IP stack)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">sockstat -4</span>      (displays IPv4 sockets)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">sockstat -6 </span>     (displays IPv6 sockets)<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="paragraph_style">8. Other stuff<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The previous 7 sections outlined the main areas of FreeBSD that most Linux admins will want to know. In this final section, I’ll list some extra stuff (in no particular order).<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Compiling software from source is very easy in FreeBSD. You can run the <span class="style_2">portsnap auto </span>command to download the source code for the ready-to-compile ports tree from the FreeBSD repository to the <span class="style_1">/usr/ports/</span> directory and then use the appropriate <span class="style_2">make</span> commands to compile and install it on your system.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">If you want to configure a firewall, there are three firewall systems to choose from (if you view the FreeBSD handbook), but the most common one is <span class="style_1">PF</span> from OpenBSD. You place your rules in <span class="style_1">/etc/pf.conf </span>and use the <span class="style_2">pfctl</span> command to control the firewall. You can also use <span class="style_1">blacklistd</span> to block undesired connections (or too many connections). You can use <span class="style_2">blacklistctl</span> to control blacklistd, as well as list connection rules in<span class="style_1"> /etc/blacklistd.conf</span>.<span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_2"><br /></span></p>
                <p class="Body"><span class="style_1">FreeBSD jails</span> are one of the earliest examples of OS virtualization/containerization. To create a FreeBSD jail, you download a userland (filesystem) tarball from the FreeBSD repository and extract it to a directory of your choice (e.g. /jails/container1). Next, you add a paragraph to the <span class="style_1">/etc/jail.conf</span> file that configures the jail parameters (e.g. IP address, etc.). Finally, you can start and manage your jail using a wide variety of different commands, including:<br /></p>
                <p class="Body">  <span class="style_2">service jail start container1</span>      (starts the container1 jail)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">service jail stop container1</span>      (stops the container1 jail)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">jls</span>      (views all jails running on the system)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">jexec container1 command</span>      (executes a command in the container1 jail)<span class="style_2"><br /></span></p>
                <p class="Body">  <span class="style_2">pkg -j container1 install apache24 </span>     (installs Apache in the container1 jail)<span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="Body">If you start the NFSv4 file sharing daemons (installed by default) by adding the appropriate entries to /etc/rc.conf, you can add lines to <span class="style_1">/etc/exports</span> to share out directories on your system. However, you can instead use ZFS to share datasets using NFSv4. These datasets are listed in <span class="style_1">/etc/zfs/exports</span>. For example, to share out the /usr/home directory using NFS, you could use the following command:<br /></p>
                <p class="Body">  <span class="style_2">zfs set sharenfs=on zroot/usr/home </span>     <span class="style_2"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="Body">If you’ve been a Linux or UNIX administrator for a long time, you’ll likely run into things on FreeBSD that remind you of days gone by. For example, you can still start daemons on demand using <span class="style_1">inetd</span> and entries within <span class="style_1">/etc/inetd.conf</span>, or use the old LPD printing system by adding printer entries to <span class="style_1">/etc/printcap</span> (please install and use CUPS instead....seriously). FreeBSD also uses the old <span class="style_1">syslogd</span> to log system events using the entries in <span class="style_1">/etc/syslog.conf</span> (it works well so why change it, right?). However, instead of logrotate, FreeBSD uses <span class="style_1">newsyslog</span> to rotate log files according to rules in <span class="style_1">/etc/newsyslog.conf</span>.<br /></p>
                <p class="Body"><br /></p>
                <p style="padding-bottom: 0pt; " class="Body">And yes, if you want to use FreeBSD as a workstation, you can install X.org and GNOME. But given that Linux is leading the charge in that area, it’d be wiser to use Linux as your workstation, and leverage FreeBSD as a wicked fast server.</p>
              </div>
            </div>
            <div id="generic-body-attributes" class="Body"></div>
          </div>
          


          <div style="height: 400px; width: 700px;  height: 400px; left: 0px; position: absolute; top: 18px; width: 700px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 700px; ">
              <img src="2_FreeBSD_UNIX_for_Linux_sysadmins_files/shapeimage_1.png" alt="" style="height: 400px; left: 0px; position: absolute; top: 0px; width: 700px; visibility: hidden; " id="generic-picture-attributes" />
            </div>
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 30px; left: 350px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext" title="" href="">next &gt;</a></p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 30px; left: 40px; position: absolute; top: 30px; width: 310px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_310_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev" title="" href="">&lt; previous</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


