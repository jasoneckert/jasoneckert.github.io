<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title>Jason Eckert&#39;s Website and Blog</title>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta name="description" content="My personal website and blog" />
  <meta name="author" content="Jason Eckert" />
  <meta name="generator" content="Jason Eckert Hugo 0.119.0" />

  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
  />
  <link
    href="https://fonts.googleapis.com/css?family=Overlock|Roboto+Mono&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/css/mero.css" />

  <script src="/js/mero.js"></script>
</head>

  <body class="bg-dark text-white m-auto" style="width:95%; max-width: 1024px;">
    <div class="wrapper">
      <nav class="mb-3 mt-3 ml-1">
  <div class="d-flex flex-row">
    <div
      class="menu-item border border-warning bg-dark p-2"
      style="border-top-left-radius: 10px; border-bottom-left-radius: 10px;"
    >
      <a href="/"><span>Home</span> </a>
    </div>
    <div class="menu-item dropdown border border-warning bg-dark p-2">
      <span class="dropbtn text-warning" onclick="toggleMenu(this)"
        >Sections <i class="fas fa-angle-down"></i
      ></span>
      <div
        class="dropdown-content p-2 bg-dark2 mt-2 rounded w-auto mt-1 d-none"
        style="min-width: 200px;"
      >
        <ul class="list-unstyled">
          
          
          
          <li class="pt-2">
            <a href="https://jasoneckert.github.io/myblog/">Blog Posts</a>
          </li>
          
          
          
          
          <li class="pt-2">
            <a href="https://jasoneckert.github.io/bio/">About Me</a>
          </li>
          
          
          
          
          <li class="pt-2">
            <a href="https://jasoneckert.github.io/reads/">Recommended Reads</a>
          </li>
          
          
          
          
          <li class="pt-2">
            <a href="https://jasoneckert.github.io/info/">Tech Stuff</a>
          </li>
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
    <div class="menu-item border border-warning bg-dark p-2">
      <a
        href="/alltaxa/"
        ><span>Search</span>
      </a>
    </div>
    <div class="menu-item border border-warning bg-dark p-2"
    style="border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
      <a
        href="/archive/"
        ><span>Archive</span>
      </a>
    </div>
  </div>
</nav>

      <main>
        
<article class="border rounded p-3 position-relative" style="margin-top: 2.5em;">
  <div class="header">
    <h1 style="font-size: 2.5em;">
      The Ultimate Linux ARM64 Workstation
    </h1>
    <div
    class="mb-1 mr-3 pl-1 pr-1 rounded bg-dark"
    style="position: absolute; top: -19px; font-size: 0.9em;"
  >
    <time>2023-03-03</time>    
    <span
      class="more"
      style="font-size: 1.5em;"
      title="Show Metadata"
      onclick="showMetadata(this)"
    >
      &#43;
    </span>
  </div><div class="m-2 metadata overflow-hidden" style="max-height: 0px;">
  
  <div class="metadata-value mb-1 taxa taxa-container-div list-sections">
    <div>
      Reading Time: 
4 mins
      
    </div>
    <div>
      Section:
      <a
        class="pl-1 pr-1 rounded border border-secondary"
        href="/myblog"
        title="Section"
      >Blog Posts</a>
    </div>
  </div>
  

  
  
  
  <div class="metadata-value mb-1 taxa taxa-container-div list-categories">
    Categories:
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/categories/blog"
      title="categories"
    >blog</a>
    
  </div>
  
  
  
  <div class="metadata-value mb-1 taxa taxa-container-div list-tags">
    Tags:
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/tech"
      title="tags"
    >tech</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/computing"
      title="tags"
    >computing</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/it"
      title="tags"
    >IT</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/apple"
      title="tags"
    >Apple</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/linux"
      title="tags"
    >Linux</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/unix"
      title="tags"
    >UNIX</a>
    
    <a
      class="pl-1 pr-1 rounded border border-secondary"
      href="/tags/open-source"
      title="tags"
    >open source</a>
    
  </div>
  
  
</div>
</div>
  <div class="article pb-3 pt-3 border-bottom border-top">
    
    <h2 id="it-all-started-this-month-last-year">It all started this month last year</h2>
<p>In March 2022, the alpha release for Asahi was made available and I immediately installed it on a Mac Mini with an 8-core Apple Silicon (ARM64) M1 processor. Asahi is a Linux distribution that can run natively on Apple Silicon-based Macs due to some slick reverse engineering provided by members of the open source community. Moreover, running Asahi is perfectly legal because Apple formally allows booting non-macOS operating systems on their Apple Silicon platform.</p>
<p>And while Asahi didn&rsquo;t support all of the Mac Mini hardware components at that time, the essential hardware drivers were available, and I was surprised by how fast the system was. After learning I could install all the software I needed, it quickly became my daily driver as I detailed in <a href="../asahi-linux/" title="my July blog post">my July blog post</a>. By December, drivers were available for all remaining hardware (Bluetooth, audio, GPU), and all of the open source packages I desired were updated to support the 16K page size needed for Apple Silicon.</p>
<p>It was at that point that I thought to myself, &ldquo;What if I could run Asahi Linux natively on Apple&rsquo;s fastest Apple Silicon Mac? That&rsquo;d be the ultimate ARM64 Linux workstation. And I definitely want to run the ultimate ARM64 Linux workstation.&rdquo;</p>
<h2 id="so-i-took-things-to-the-next-level">So I took things to the next level</h2>
<p>This January, I installed Asahi Linux on Apple&rsquo;s most powerful ARM64 system: the Mac Studio with a 20-core M1 Ultra processor and 128GB of RAM. It&rsquo;s paired with a stunning Dell 34&quot; widescreen curved monitor via HDMI.</p>
<p>At the same time, I decided it was time to migrate from the powerful i3 window manager (which must run on the legacy X window system) to the sway compositor that runs on the new Wayland window system. This was much easier than I anticipated - sway performs better and uses a more streamlined configuration compared to i3.</p>
<p>Below is a high-res screenshot of my sway desktop on the Mac Studio (right-click the image and choose to open it in a new browser tab if you want to zoom in on it easily). You can find my custom sway dotfiles configuration <a href="https://github.com/jasoneckert/sway-dotfiles" title="in this GitHub repo">in this GitHub repo</a>.</p>
<p><img src="sway.png#center" alt="Asahi sway desktop" title="Asahi sway desktop"></p>
<h2 id="is-there-anything-that-doesnt-work">Is there anything that doesn&rsquo;t work?</h2>
<p>To quote Hamlet, Act 3, Scene 3, Line 87: “No.”</p>
<p>Everything works&hellip; and works perfectly. All the hardware (Bluetooth, audio, HDMI, USB, 10G Ethernet, WiFi, and GPU) performs flawlessly with the drivers created by the Asahi team this past year, and there isn&rsquo;t a single piece of software I want or need that doesn&rsquo;t run beautifully in Asahi on this system.</p>
<p>Most software packages I&rsquo;ve installed are from the Arch User Repository (since Asahi is based on Arch), but some of them are installed as Flatpak sandboxes (e.g., Visual Studio Code). For more complicated software systems, I often obtain ready-made container images and run them as containers (e.g., my NextCloud instance). You&rsquo;ll also note from the <code>htop</code> output in my screenshot that I&rsquo;m running a K3s cluster for testing the microservices I develop.</p>
<p>Since most of my workloads are containerized, I have no need to run other virtual machines of Linux. However, I do have to support several web apps that run within BSD jails. For this, I installed a dedicated QEMU virtual machine of FreeBSD UNIX that uses 8 cores and 64GB RAM. Below is a picture of the virtual machine console running within a terminal in my sway desktop. You can find my QEMU script <a href="https://github.com/jasoneckert/AsahiVMs" title="in this GitHub repo">in this GitHub repo</a>.</p>
<p><img src="freebsd.png#center" alt="FreeBSD VM" title="FreeBSD VM"></p>
<h2 id="this-is-by-far-the-fastest-linux-desktop-ive-ever-used">This is by far the fastest Linux desktop I&rsquo;ve ever used.</h2>
<p>Everything - and I mean everything - is unbelievably fast. Things run instantaneously, and app splash screens don&rsquo;t seem to exist.</p>
<p>In some cases, it is too fast. When I installed K3s, all of the containers in the kube-system namespace kept entering the dreaded CrashLoopBackOff state (something I&rsquo;ve never seen before outside a production container). After some investigation, I found out that the Mac Studio was just too fast for the Kubernetes resource timing, and I had to add resource limits to each pod to remedy the situation.</p>
<p>One of the main reasons I like to develop on Linux/ARM64 is because it matches my extracurricular development. The startup I&rsquo;m currently working with uses a compute heavy microservice-based app that typically runs in an AWS c6g.12xlarge Graviton instance with 48 ARM64 cores. The app is so heavy that we&rsquo;ve built in our own load simulation and performance monitoring microservices into the app itself (our service mesh also helps with this).</p>
<p>So, I staged the app on my Mac Studio running Asahi and ran the load simulation to see how it fared with our staging environment on AWS. The Mac Studio blew the Graviton instance out of the water. Latency at the same load was roughly 20% lower on average and compute at our peak was exactly 36% faster consistently. I/O was trickier to monitor and interpret, but in my opinion, it wasn&rsquo;t significantly different overall.</p>
<p>It really is the ultimate ARM64 Linux workstation. And I love using it.</p>

  </div>
  <div class="mt-4 d-flex flex-row justify-content-around">
  <div>
    <a
      href="/myblog/linux-is-making-apple-great-again/"
      data-toggle="tooltip"
      data-placement="top"
      title="Linux is making Apple Great Again"
      ><i class="fas fa-chevron-circle-left" style="font-size: 2em;"></i></a
    >
  </div>
  <div>
    <a
      href="/myblog/linux-fun-facts/"
      data-toggle="tooltip"
      data-placement="top"
      title="Fun Facts About Linux"
      ><i class="fas fa-chevron-circle-right" style="font-size: 2em;"></i></a
    >
  </div>
</div>

</article>
<script>
  let showMetadata = function(x) {
    let elem = x.parentNode.nextElementSibling;
    if (window.getComputedStyle(elem)["height"] === "0px") {
      elem.style.maxHeight = elem.scrollHeight + "px";
      x.innerHTML = "&times;";
      x.title = "Hide Metadata";
    } else {
      elem.style.maxHeight = "0px";
      x.innerHTML = "&#43;";
      x.title = "Show Metadata";
    }
  };
</script>


      </main>
    </div>
    <footer>
  <div class="w-60 bg-danger ml-auto mr-auto mt-4" style="height: 4px;"></div>
  <div class="mt-0 mb-0" style="font-size: 1.7em;">
    <p class="text-center">
      WARNING: FULL FRONTAL NERDITY (tech-challenged persons strongly cautioned) 
    </p>
  </div>
</footer>

  </body>
</html>
